# **KS0446 Keyestudio Frog Robot for Mixly Tutorial**

![蛙](media/bf1a596dded1109ca6c5bc1295ead4bb.png)



## About the tutorial

What an amazing Otto Frog Robot is coming!

This kit provides a perfect opportunity to build your very first robot, and it
makes the process of learning about robotics easy, interactive, and FUN!

The kit is based on the keyestudio nano ch340, compatible with both Arduino
open-source platform and Mixly Blocks coding.

You can program your own robot to walk, dance and follow obstacle, easy to build
and code. No prior tech experience required!

Through play and experimentation children can exercise computational thinking
and put skills into practice that are necessary for problem solving.

![IMG_256](media/b3a76280ed9f1e2243a22822846f0257.jpeg)![画板 36 副本
2mdpi](media/2df0a13f062faaebf900a76fb9c5162d.jpeg)

## Features

-   Voltage input: DC 7-12V

-   Ultrasonic module for measuring the front obstacle distance, forming
    obstacle avoiding system;

-   Pairing HM-10 Bluetooth module with mobile Bluetooth to navigate the frog
    robot;

-   Providing the mobile APP compatible with both Android and mac system;

-   The NANO shield extends 12 digital pins and 8 analog pins into 3pin header,
    easy to connect a couple of sensor modules for projects extension;

-   The NANO shield comes with an I2C communication pin, able to connect I2C
    communication module for experiment extension.

![青蛙](media/3fec32944bd352ccb20b2552d93c2753.png)

## Parts List

In this keyestudio frog robot kit package, you’ll receive all the components
needed to build your own robot, easy to code and learn to play.

| **No.** | **Item**                                                                         | **QTY** | **Picture**                                                                                                                                                                                                                      |
|---------|----------------------------------------------------------------------------------|---------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| 1       | Keyestudio nano ch340                                                            | 1       | ![ks0446-5](media/4562e153c4b9734293a5ad39a998f866.jpeg)                                                                                                                                                                         |
| 2       | AM/mini5P transparent blue OD:5.0 L=30cm USB cable                               | 1       | ![ks0446-5](media/4562e153c4b9734293a5ad39a998f866.jpeg)                                                                                                                                                                         |
| 3       | keyestudio NANO shield                                                           | 1       | ![ks0446-5](media/4562e153c4b9734293a5ad39a998f866.jpeg)                                                                                                                                                                         |
| 4       | Keyestudio HM-10 Bluetooth-4.0 V3 compatible with HC-06 pins                     | 1       | ![ks0446-5](media/4562e153c4b9734293a5ad39a998f866.jpeg)                                                                                                                                                                         |
| 5       | HC-SR04 Ultrasonic sensor                                                        | 1       | ![ks0446-5](media/4562e153c4b9734293a5ad39a998f866.jpeg)                                                                                                                                                                         |
| 6       | 18650 2-cell Battery case with JST-PH2.0MM-2P lead(115MM)                        | 1       | ![ks0446-5](media/4562e153c4b9734293a5ad39a998f866.jpeg)                                                                                                                                                                         |
| 7       | M1.6\*10MM round-head screw                                                      | 4       | ![图层 16 拷贝 3](media/e365ac88bcf4cd4780ef895255bb0cd1.png)                                                                                                                                                                    |
| 8       | M1.6 304 stainless steel nut                                                     | 4       | ![图层 17](media/b9d007f4e9685649685927caa98da8e4.png)                                                                                                                                                                           |
| 9       | M3\*6MM round-head screw                                                         | 16      | ![图层 19](media/d51ae29baa8bfe389655d79ce9a6df96.png)                                                                                                                                                                           |
| 10      | M3\*10MM round-head screw                                                        | 10      | ![图层 21](media/869a9273fa4ed70c4c723588c521ae34.png)                                                                                                                                                                           |
| 11      | M3\*10MM flat-head screw                                                         | 3       | ![图层 22 拷贝 2](media/91db11ee2ab08196513640d8daa57d0c.png)                                                                                                                                                                    |
| 12      | M3 nickel plating nut                                                            | 14      | ![图层 22 拷贝 9](media/8f4af4bbb8aacaa0081cfa92cea10f8c.png)                                                                                                                                                                    |
| 13      | M2\*10MM round-head screw                                                        | 8       | ![图层 21 拷贝](media/d36e34db37961ae25a42714f34bb6412.png)                                                                                                                                                                      |
| 14      | M2 nickel plating nut                                                            | 12      | ![图层 22 拷贝](media/6b704994c3de8066f91d36489267c9ca.png)                                                                                                                                                                      |
| 15      | M1.2X5MM tapping screw                                                           | 12      | ![IMG_256](media/c634b2fd4e2edfa92cd91f416cb30d93.png)                                                                                                                                                                           |
| 16      | M3 304 self-locking nut                                                          | 2       | ![0198 (12)](media/0e8eee1d1b5394061f34f631cefe0493.png)![0198 (12)](media/0e8eee1d1b5394061f34f631cefe0493.png)                                                                                                                 |
| 17      | Dual-pass M3\*10MM                                                               | 4       | ![图层 24 拷贝](media/5f82d4f02c789087e1a74cc70b24e384.png)                                                                                                                                                                      |
| 18      | Dual-pass M3\*30MM                                                               | 4       | ![图层 29 拷贝](media/0ee5b9e2b540f794a0cfba82f2ce1573.png)                                                                                                                                                                      |
| 19      | Acrylic plate 3PCS  215\*120MM T=3MM  transparent green environmental protection | 1       | ![ks0446-5](media/4562e153c4b9734293a5ad39a998f866.jpeg)![ks0446-5](media/4562e153c4b9734293a5ad39a998f866.jpeg) ![ks0446-5](media/4562e153c4b9734293a5ad39a998f866.jpeg)                                                        |
| 20      | Servo MG90S（14g）23\*12.2\*29mm(black) 180°                                     | 4       | ![ks0446-5](media/4562e153c4b9734293a5ad39a998f866.jpeg)![ks0446-5](media/4562e153c4b9734293a5ad39a998f866.jpeg)![ks0446-5](media/4562e153c4b9734293a5ad39a998f866.jpeg)![ks0446-5](media/4562e153c4b9734293a5ad39a998f866.jpeg) |
| 21      | Female to female 10CM Jumper wire                                                | 20      | ![ks0446-5](media/4562e153c4b9734293a5ad39a998f866.jpeg)                                                                                                                                                                         |
| 22      | yellow and black Handle 3\*40MM cross screwdriver                                | 1       | ![ks0446-5](media/4562e153c4b9734293a5ad39a998f866.jpeg)                                                                                                                                                                         |
| 23      | Transparent red film acrylic double-sided adhesive tape                          | 1       | ![ks0446-5](media/4562e153c4b9734293a5ad39a998f866.jpeg)                                                                                                                                                                         |
| 24      | Flange bearing                                                                   | 2       | ![ks0446-5](media/4562e153c4b9734293a5ad39a998f866.jpeg)                                                                                                                                                                         |

**  
**

1.  **Install Mixly and Driver**

### Download Mixly Software

**① Introduction for Mixly**

Mixly is a free open-source graphical Arduino programming software, based on
Google’s Blockly graphical programming framework, and developed by Mixly Team@
BNU.

It is a free open-source graphical programming tool for creative electronic
development; a complete support ecosystem for creative e-education; a stage for
maker educators to realize their dreams.

Although there is an Ardublock graphical programming software launched by
Arduino official, Ardublock is not perfect enough, and many common functions
cannot be realized.

**②Download and install mixly1.0 software**

There are two kind installation packages provided for you in the following
links:

[Mixly1.0 for Win
7/8/10](http://116.62.49.166/Mixly_WIN.7z)：<https://fs.keyestudio.com/Mixly1-Windows>

[Mixly1.0 for
Mac](https://116.62.49.166/MixlyMac.zip)：<https://fs.keyestudio.com/Mixly1-MACOS>

**Windows version：**

We will take Mixly1.0 (Windows version) as example.

**Install Software：**

You will get installation package after downloading. As shown below:

![](media/2c120c5b3e52fbec94b62b48a016a4d5.png)

Unzip the package, you will see “Mixly 1.0 for keyestudio.exe”

![](media/f8201facff78d06aad9ced9f5fe65e0f.png)

Double-click ”![](media/8ec85e7035e6acc2271635f7c03dfc8e.png)Mixly 1.0 for
keyestudio.exe”, the following interface pops up.

![](media/3b4de4ee8a8535e2e316c38e4c95e28f.png)

Mixly 1.0 interface:

![](media/c3360c388c06334c2d06c168763a3bed.png)

![IMG_256](media/c09dc67b6729cab1451932399afcbde6.png)

More details about Mixly 1.0 for
keyestudio：<https://wiki.keyestudio.com/Getting_Started_with_Mixly1.0>

### Install Driver

Let’s install the driver of development board. The USB to serial chip of control
board adopts CH340 chip, therefore, the driver of chip needs installing. We take
Windows system as example.

Double-click Mixly 1.0 for keyestudio folder→Arduino→drivers, as shown below;

Then tap “drivers”.

![](media/5a7574db1405f5759eaa51fd01ac45bc.png)

![](media/02c7bbaa4fc91023b054e024a23229ff.png)

**If your PC is Windows10:**

When you connect the board to your computer at the first time, right click the
icon of your *“Computer” —\>for “Properties”—\> click “Device manager”*, under
“Other Devices”, you should see an icon for “USB2.0-Serial” with a little yellow
warning triangle next to it, as shown below：

![IMG_256](media/5b4ca91bca5045f9994ee6b0d7d8cbac.png)

After a while, the driver USB-SERIAL CH340 will be installed automatically.

If no response, you can right-click
“**USB2.0-Serial**”→“**USB2.0-Serial**”→“**Search automatically for updated
driver software**”; then wait for the installation.

![QQ截图20201013100220](media/378b65e69d5a926721245ecb4d2209a7.png)

![QQ截图20201013095541(1)](media/549822155210794e59d6a7d0ccb27d13.png)

![QQ截图20201013100328](media/ad275090813d9a0c0aceb81cecd325fb.png)

![QQ截图20201013100356](media/cdfc9ad18bb48905614cb7015ee74a80.png)

Right click Computer----- Properties----- Device Manager, as shown below:

![IMG_256](media/579f5d1cf97b48eaa4f327c171f850ee.png)

If your PC is not Windows 10, you will need to install manually.

Go to KS0446 Keyestudio.... Programming folder→Resources→usb_ch341_3.1.2009.06

We need to use driver usb_ch341_3.1.2009.06.

![](media/22631758907f95a92110c36ae6ea17cc.png)

When you connect the board to your computer at the first time, right click the
icon of your *“Computer” —\>for “Properties”—\> click “Device manager”*, under
“Other Devices”, you should see an icon for “USB2.0-Serial” with a little yellow
warning triangle next to it.

![](media/56192a84960eade1d1429bf3ad6a79c0.png)

Then right-click on the device and select the top menu option (Update Driver
Software...) shown as the figure below.

![](media/4e24b169b7c8454e732d5697c2d30e7b.png)

It will then be prompted to either “Search Automatically for updated driver
software” or “Browse my computer for driver software”. Shown as below. In this
page, select “Browse my computer for driver software”.

![](media/c42f85c9cf7bc242d3809882bb3f894e.png)

Click “Browse” to select “usb_ch341_3.1.2009.06” and tap “OK”.

“usb_ch341_3.1.2009.06”driver folder is located in folder KS0446 Keyestudio Frog
Robot......Programming

![](media/7d2866aea9f7b3dfe210cab2ce545344.png)

Click “Next”，once the software has been installed, you will get a confirmation
message. Installation completed, click “Close”.

![](media/34c11d33f9b173e377a66ff9f8648ed2.png)

Up to now, the driver is installed well. Then you can right click*“Computer”
—\>“Properties”—\>“Device manager”*, you should see the device as the figure
shown below.

![](media/12d0d097f012ae23a60bf996f0324a89.png)

### Start Your Program

Click“Open”→ sample → arduino→ Arduino → 01 IN-OUT→01-LED Blink.mix

![](media/c52df9c03315123391498cc1f5a5ae82.png)

In order to avoid errors when downloading code to Arduino development board, we
must select correct Arduino board. (Notice: we use NANO board in the tutorial,
therefore, **Arduino/keyestudio Nano[atmega328]** should be selected when
setting board)

![dsBuffer.bmp](media/951f182544a526d6b04864f272887e96.png)

The corresponding board and COM port will be shown after setting board and COM
port.

![IMG_256](media/579f5d1cf97b48eaa4f327c171f850ee.png)

![dsBuffer.bmp](media/c7ecc353da2eadc60205de0efa5713dc.png)

![](media/6145a4c1501518ede2b32878243420fd.png)

Click **Compile** to start compiling the program, check errors.

![](media/1b883c5c481f8a5c29628a2b9119b4c2.png)

Click **Upload** to upload the program, upload successfully.

![](media/de1bcbb3bea617c5010384705bde5f17.png)

After uploading the program successfully, the on-board LED blinks for 1s.
Congratulation, you finish the first program.

## Hardware Projects

As you work your way through each project, you will learn to how to program the
robot to move, dance, and follow obstacles.

### Project 1: Keyestudio NANO CH340

![KS0173  nano ch340 (1)](media/93ed1381b8363c371a216ae8f16a68ed.jpeg)

**Introduction:**

The keyestudio Nano CH340 is a small, complete, and breadboard-friendly board
based on the ATmega328P-AU. Compared with ARDUINO NANO, the USB-to-serial port
chip used in keyestudio Nano is CH340G, so that the using method is the same
except the driver installation file.

It has 14 digital input/output pins (of which 6 can be used as PWM outputs), 8
analog inputs, a 16 MHz crystal oscillator, a mini USB port, an ICSP header and
a reset button.

The keyestudio Nano can be powered via the Mini-B USB connection, or female
headers Vin/GND (DC 7-12V).

**TECH SPECS:**

| **Microcontroller**             | ATmega328P-AU                                |
|---------------------------------|----------------------------------------------|
| **Operating Voltage**           | 5V                                           |
| **Input Voltage (recommended)** | DC7-12V                                      |
| **Digital I/O Pins**            | 14 (D0-D13)  (of which 6 provide PWM output) |
| **PWM Digital I/O Pins**        | 6 (D3, D5, D6, D9, D10, D11)                 |
| **Analog Input Pins**           | 8 (A0-A7)                                    |
| **DC Current per I/O Pin**      | 40 mA                                        |
| **Flash Memory**                | 32 KB of which 2 KB used by bootloader       |
| **SRAM**                        | 2 KB                                         |
| **EEPROM**                      | 1 KB                                         |
| **Clock Speed**                 | 16 MHz                                       |
| **LED_BUILTIN**                 | D13                                          |

**Element and Interfaces:**

Here is an explanation of what every element and interface of the board does:

![画板 126ew](media/fcd4937b93ba2bb57d9b291fca4db2d9.jpeg)

| **1**  | **ICSP Header**                        | **ICSP (In-Circuit Serial Programming) Header** ICSP is the AVR, an micro-program header consisting of MOSI, MISO, SCK, RESET, VCC, and GND. It is often called the SPI (serial peripheral interface) and can be considered an "extension" of output. In fact, slave the output devices under the SPI bus host. When connecting to PC, program the firmware to ATMEGA328P-AU.                                                                                                                     |
|--------|----------------------------------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| **2**  | **LED indicator** **（RX）**           |  Onboard you can find the label: RX(receive ) When control board communicates via serial port, receive the message, RX led flashes.                                                                                                                                                                                                                                                                                                                                                               |
| **3**  | **LED indicator** **（TX）**           |  Onboard you can find the label: TX (transmit) When control board communicates via serial port, send the message, TX led flashes.                                                                                                                                                                                                                                                                                                                                                                 |
| **4**  | **LED indicator** **（POW）**          |  Power up the control board, LED on, otherwise LED off.                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| **5**  | **LED indicator** **（L）**            |  There is a built-in LED driven by digital pin 13. When the pin is HIGH value, the LED is on, when the pin is LOW, it's off.                                                                                                                                                                                                                                                                                                                                                                      |
| **6**  | **RX0（D0）** **TX1（D1）** **D2-D13** | It has 14 digital input/output pins D0-D13 (of which 6 can be used as PWM outputs). These pins can be configured as digital input pin to read the logic value (0 or 1). Or used as digital output pin to drive different modules like LED, relay, etc.                                                                                                                                                                                                                                            |
| **7**  | **RST**                                | Reset pin: connect external button. The function is the same as RESET button.                                                                                                                                                                                                                                                                                                                                                                                                                     |
| **8**  | **MEGA 328P**                          |  Each board has its own microcontroller. You can regard it as the brain of your board. Microcontrollers are usually from ATMEL. Before you load a new program on the Arduino IDE, you must know what IC is on your board. This information can be checked at the top surface of IC. The board’s microcontroller is ATMEGA328P-AU.  More info. see the [datasheet](http://101.96.10.64/ww1.microchip.com/downloads/en/DeviceDoc/Atmel-42735-8-bit-AVR-Microcontroller-ATmega328-328P_Summary.pdf)  |
| **9**  |  **MINI USB**                          |  The board can be powered via Mini-B USB connection. Also upload the program to the board via USB port.                                                                                                                                                                                                                                                                                                                                                                                           |
| **10** | **3V3 pin**                            |  Provides 3.3V voltage output                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| **11** | **REF**                                |  Reference external voltage (0-5 volts) for the analog input pins. Used with [analogReference()](https://www.arduino.cc/reference/en/language/functions/analog-io/analogreference/).                                                                                                                                                                                                                                                                                                              |
| **12** | **A0-A7**                              |  The Nano has 8 Analog Pins, labeled A0 through A7.                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| **13** | **5V pin**                             |  Provides 5V voltage output                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| **14** | **GND**                                |  Ground pin                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| **15** | **VIN**                                |  Input an external voltage DC7-12V to power the board.                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| **16** | **Reset** **Button**                   |  Used to reset the control board                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
| **17** | **CH340G**                             |  USB-to-serial port chip, converting the USB signal into Serial port signal.                                                                                                                                                                                                                                                                                                                                                                                                                      |
| **18** | **AMS1117**                            |  Convert the external voltage input DC7-12V into DC5V, then transfer it to the processor and other elements.                                                                                                                                                                                                                                                                                                                                                                                      |

**Specialized Functions of Some Pins:**

-   **Serial communication:** 0 (RX) and 1 (TX). Used to receive (RX) and
    transmit (TX) TTL serial data.

-   **PWM (Pulse-Width Modulation):** D3, D5, D6, D9, D10, D11

-   **External Interrupts:** D2 (interrupt 0) and D3 (interrupt 1). These pins
    can be configured to trigger an interrupt on a low value, a rising or
    falling edge, or a change in value. See the
    [attachInterrupt()](https://www.arduino.cc/reference/en/language/functions/external-interrupts/attachinterrupt/)
    function for details.

-   **SPI communication:** D10 (SS), D11 (MOSI), D12 (MISO), D13 (SCK).

-   **IIC communication:**  A4 (SDA); A5(SCL)

### Project 2: keyestudio NANO Shield

![ks0425-1](media/bcea74fb1ff50613b581f4c401a535da.jpeg)

**Overview**

keyestudio Nano ch340 is a tiny control board based on Arduino platform, which
is deeply popular.

However, if want to connect several sensor modules to keyestudio Nano ch340, and
connect external power, we need to use breadboard and a bunch of jumper wires,
which is pretty inconvenient.

We specially design this NANO shield, fully compatible with keyestudio Nano
ch340.

The NANO shield has brought out digital and analog pins of keyestudio Nano ch340
into 3PIN headers (GND, 5V, Signal) with pin pitch of 2.54mm.

The NANO shield also leads out frequently-used communication pins, such as
serial port communication and I2C communication. It’s greatly easy to connect
keyestudio Nano ch340 and other sensor modules.

It comes with a power indicator and a reset button as well.

![ks0425-4](media/2abbd19b346dc42c503de16fe1120938.jpeg)For external power, the
NANO shield comes with a PH2.0-2P connector (input DC7-12V); a Power_Switch for
power control.

To supply power for other sensors, the NANO shield comes with a 3-way DC3.3V
power output pin header with pin pitch of 2.54mm.

It comes with 4 fixing holes with a diameter of 3mm, so easy to mount on other
devices.

**Features**

1.  Extends 12 digital pins into 3pin header

2.  Extends 8 analog pins into 3pin header

3.  Comes with a serial communication pin header (for Bluetooth module)

4.  Comes with an I2C communication pin

5.  Comes with 3-way DC 3.3V power output pin

6.  Comes with a power indicator and a reset button

7.  Comes with an external power connector（PH2.0-2P）and a control button

![ks0425-3](media/7e2c85cb775229c625bb79f5704a684a.jpeg)

**Technical Parameters**

-   Voltage input: DC7-12V

-   Power connector: PH2.0-2P

-   Pin/Female header: 2.54mm

-   Fixing hole diameter: 3mm

-   Dimensions: 57mm\*54mm\*17mm

-   Weight: 20.4g

**Controller Compatible**

-   keyestudio Nano ch340

**PINOUTS**

**![ks0425 英](media/bffe59e8151db9645768d3a29a9b06a6.png)**

Simply stack the keyestudio Nano ch340 into the keystudio NANO shield. Supply
the power with batteries via white connector.

![KS0446](media/245f137c91d557cbcea439948c7ed565.png)

### Project 3: Adjusting Servo Angle

In the process of frog robot DIY, the frog robot has a 180° servomotor at each
joint. We can control the servomotor at each joint to rotate at different
angles, thus controlling the frog robot to run different actions.

In this course we focus on the principle and usage of the servomotor in the frog
robot kit.

The servomotor is a position servo driver that can rotate between 0 and 180
degrees. If you want your robot assistant to help you get a book, the robot arm
rotation angle is too big or too small, so that can't pick up the book. Only the
angle is just right, it can complete the task of taking the book, so can
accurately control the angle.

Servo motor is a position control rotary actuator. It mainly consists of
housing, circuit board, core-less motor, gear and position sensor.

![5](media/976f21653a20b3ef9e3c21fece0b38f9.jpeg)Included with your servo motor
you will find a variety of black mounts that connect to the shaft of your servo.

You may choose to attach any mount you wish for the circuit. It will serve as a
visual aid, making it easier to see the servo spin.

**Working principle:**

The receiver or MCU outputs a signal to the servomotor. The motor has a built-in
reference circuit that gives out reference signal, cycle of 20ms and width of
1.5ms. The motor compares the acquired DC bias voltage to the voltage of the
potentiometer and outputs a voltage difference.

Servo motor comes with many specifications. But all of them have three
connection wires, distinguished by brown, red, orange colors (different brand
may have different color).

Brown one is for GND, red one for power positive, orange one for signal line.

![](media/35084ae289a08e35bdb8c89ceb134ba4.png)

The rotation angle of servo motor is controlled by regulating the duty cycle of
PWM (Pulse-Width Modulation) signal. The standard cycle of PWM signal is 20ms
(50Hz).

Theoretically, the width is distributed between 1ms-2ms, but in fact, it's
between 0.5ms-2.5ms. The width corresponds the rotation angle from 0° to 180°.

But note that for different brand motor, the same signal may have different
rotation angle.

![180度舵机](media/9c287c5ca4f5792f52b8c72d0d2a5448.png)

We can set the HIGH/LOW for corresponding pins in the Mixly blocks software, so
as to adjust the servo angle; furthermore, we specially create the robot
library, so easy to control the servo angle with simplified code.

**Connection Diagram**

Simply stack the keyestudio Nano ch340 into the keystudio NANO shield.

Connect the Servo pin to digital pin 4

**![2.1](media/d9e77265b337faa850610d7404d371d3.png)**

**Source Code**

Test the angle that servo motor moves between 0°and 180°

First of all, go to **“Control”**, drag and drop the command block **“count
with(i)from(1)to(10)step(1) do”**

![](media/58012dceed41388f31bc8efee272dc9d.png)

And modify as **from 0 to 180, step 1**.

Enter **“robot”** and click **“Frog_Robot”**, drag and drop the block
![](media/a328f26efa2cc338a90fff43e931438a.png)

This block library has set well the pulse width; can change the pin0 into any
digital pins. Because the signal wire of servo motor is connected to digital
**pin 4**, should change the pin0 to pin4.

Go to **“Variables”**, drag and drop the
variable![](media/4781fd5e65aec77ceac5ed08fb6a1a28.png)into angle 0 block. Set
the delay time in any millisecond. We set to delay **200ms**. The servo will
slowly rotate from 0° to 180° for every 1° increase.

![](media/137dcff33a8d5a242acdb70f2da38d9f.png)

After that, we duplicate the above code string once, and set the value from 180
to 0, step set to -1. The rest keep same. Upload the complete code.

![](media/061f2ce47949e96e00fc1e2637c8b5a7.png)

**Test Result**

Upload the Code success, press down the Power_Switch, the servo motor will
rotate back and forth from 0°to 180°.

**Little Knowledge:**

1.  ![](media/a328f26efa2cc338a90fff43e931438a.png)this piece of block is used
    to direct regulate the servo. connect the servo signal pin to D4; set the
    servo angle to a variable![](media/07c76846ad30e2e6687286d40549cbd8.png),
    that is, this defined variable is applied to regulate the servo angle.

Because the servo angle is in the range of 0-180°, the range of
variable![](media/07c76846ad30e2e6687286d40549cbd8.png) should set from 0 to
180.

The delay period is in milliseconds, so if you want the servo turn more fast,
change the value to 100.

1.  ![](media/648c2ea4c04181e14a9a1c935d245055.png)This block means variable i
    increases from 0 to 180, and each step increases 1.

![](media/21f95bb218fe0573308edfb41ddc2bd1.png)This block means variable **i**
reduces from 180 to 0, and each step reduces 1.

**Extension Practice:**

1.  Refer to the test code. Try to reset the servo pin and rotation speed

    (Tips: set the delay time for servo angle ; or adjust to increase/reduce the
    step, which should be divisible by 180, like 2, 3, 5.)

![](media/2c4196941bcef5f80dc4a02516a00a99.png)

![](media/03ff69bcdb0b5636209bc42a3a0c31b1.png)

### Project 4: Ultrasonic Detecting Obstacles

The ultrasonic module will emit the ultrasonic waves after trigger signal. When
the ultrasonic waves encounter the object and are reflected back, the module
outputs an echo signal, so it can determine the distance of object from the time
difference between trigger signal and echo signal.

We can use the ultrasonic sensor to detect whether there is an obstacle ahead.
It is commonly used to measure the distance between the front obstacle and
robot.

In the process of robot DIY, we can use the measured distance by ultrasonic
sensor to build functional robots, such as automatic avoiding, following, etc.

In the experiment, we use the ultrasonic sensor to measure the distance between
the robot and front obstacle.

The following picture is an ultrasonic module.

![MD0017 (1)](media/0d00b92063db6dbc3af2efdd6b2f90f3.jpeg)

**Specifications:**

-   Operating voltage: DC 5V

-   Operating current: 15mA

-   Operating frequency: 40khz

-   Maximum detection range: 3-5m

-   Minimum detection range: 2cm

-   Induction Angle: less than 15 degrees

-   High accuracy: up to 3mm

**Hookup Guide**

**![2.2](media/1a1cb3eb0a8f65065cbacc85d9e74e1d.png)**

Connect the ultrasonic sensor to NANO shield, VCC pin to 5V(V), Trig pin to
digital 6 (S), Echo pin to digital 7 (S), GND pin to GND(G); Then stack the NANO
CH340 into the NANO shield.

**Test Code**

Go to **“Control”**, drag out the **“setup”** block;

Go to **“SerialPort”**, drag out the block **“Serial baud rate(9600)”** and
**“Serial printIn”** , then drag the block **“Serial baud rate(9600)”** into the
**“setup”** block.

Enter **“robot”** and click **“Frog_Robot”**, drag and drop the ultrasonic
block![](media/994f0ef5f0c0355d870ef7637ba00350.png) into **“Serial printIn”**
block![](media/cfeb0a2c3b4d7446c824cca64af524de.png).

And again go to **“Control”**, drag the delay
block![](media/1f614ee13e250bac7cb2aaf60e4fb74a.png); set the delay time in
**200ms**.

Complete and upload the code.

![](media/9cfad37bea5a44a99aaab51b094aa5d5.png)

**Test Result**

Upload the code success, press the Power_Switch on NANO shield.

Open the **Monitor** and set **the baud rate to 9600**.

Move your hand or a large, flat object closer and farther away from the
ultrasonic sensor. As the object approaches, the monitor will show the distance
(unit:cm) being read from the sensor.

![](media/6b2c5c28ce058f3002ada79749781e2e.png)

**Little Knowledge:**

1.  In the code, we use the![](media/994f0ef5f0c0355d870ef7637ba00350.png)to
    measure the distance between ultrasonic sensor and obstacle ahead, with a
    unit of cm.

2.  ![](media/e473e59c1232eba7bbca67023589cb71.png) means the baud rate is set
    to 9600;   
    ![](media/0efa5dc4ed2f58cf68319af5980a1e6c.png): print the distance value on
    the newline of monitor.

If use the ![](media/50fbe8cae6b756f6e57fe645174b199f.png), only print out the
value but no line wrap.

1.  What happens when you change the number in the delay(200) :

![](media/89476de08c0c1b2a7ef8f5f485abe1c4.png)

This delay period is in milliseconds, so if you want the LED display as low,
change the value, try 2000.

**Extension Practice:**

1.  You can add new texts or distance unit (cm) on the monitor display.

    ![](media/8a699072e54359cdab18db582fbfabdc.png)

2.  Change the baud rate and delay time to see the result.

    ![](media/6a4730beca34e4b53fd7d2affee7c9b7.png)

## Robot Projects

Let’s get started to assembling the lovely frog robot to move, dance or even
follow objects. Do operate the robot easily with Bluetooth APP!

Follow this easy and simple instruction of how to install and program your Otto
Frog Robot!

### ROBOT ASSEMBLY

All the parts for building frog robot are included in the kit, assembling them
is easy and typically takes around two hours!

![蛙](media/bf1a596dded1109ca6c5bc1295ead4bb.png)

**Note:**

Before install the frog robot, first need to regulate the 4 servo motors to 90°

Stack the Nano ch340 onto the Nano shield; connect 4 servo motors to digital
pin5,4,3,2 separately.

**![3](media/ec30591f93f8e594e2e1bb9e4f4c202f.png)**

**Code:**

Upload the code below to turn the 4 servos to 90°

(Refer to project 3)

Open the Mixly 1.0 for keyestudio software, Enter **“robot”** and click
**“Frog_Robot”**, drag out the block
![](media/923b7b646b6bb091f08e2ccf05354010.png)and duplicate it three times.
Change the pin0 into pin2, pin3, pin4 and pin5 respectively. Angle set to 90;
delay in 500ms.

Upload the test code to adjust well the servo angle.

![](media/2f4c74ca67d4dea073e925d531ead8f5.png)

##### Fix Feet

![](media/fa78a7c1fa78da0e62d465aa36869960.png)

![](media/d4de8b12c82da7b95bca85c6176a6d38.png)

![](media/a48a6e9b92268b92598067275daf8be1.png)

##### Fix Legs to Feet

![](media/21ed6292f71cf8ac52ceb2568ba46dd9.png)

![](media/d92cf0ed44a63d4a70b8269139ce5a28.png)

![](media/eb315786ccfa9469455ab683c2b30bc8.png)

![](media/8c127e04dcdc9af29d7bc3c0f95d1865.png)

![](media/74637d086b6933b00c76ed3c8ffa7f0b.png)

##### Fix Head to Body

![IMG_256](media/761f854a4683c8f36cbd6a1b02d577d8.png)

**Components：**

① 4pcs M1.6X10MM screws

② 4pcs M1.6 nuts

③ 1pcs ultrasonic sensor

④ 1pcs frog face Acrylic

**Tools：**

① M3 screwdriver x1

**Assembly:**

Peel the adhesive backing off the Acrylic plate.

Mount the ultrasonic sensor to Acrylic plate as figure C-1; tighten the screws,
and notice the hole alignment.

Shown as figure C-1

C-1![IMG_256](media/761f854a4683c8f36cbd6a1b02d577d8.png)

![IMG_256](media/761f854a4683c8f36cbd6a1b02d577d8.png)

**Components：**

① 4pcs M3X30MM dual-pass copper pillar

② 4pcs M3x6 screws

③ 1pcs frog head Acrylic

**Tools：**

① M3 screwdriver x1

**Assembly:**

Peel the adhesive backing off the Acrylic plate.

Fix the copper pillar to Acrylic plate with screws as figure C-2; tighten the
screws, and note that copper pillars are on the same side of logo; keep the hole
alignment.

Shown as figure C-2

C-2![IMG_256](media/761f854a4683c8f36cbd6a1b02d577d8.png)

![IMG_256](media/761f854a4683c8f36cbd6a1b02d577d8.png)

**Components：**

① 4pcs M3X10MM dual-pass copper pillar

② 4pcs M3x6 screws

③ complete Accessory C-2

**Tools：**

① M3 screwdriver x1

**Assembly:**

Fix the copper pillar to Acrylic plate with screws as figure C-3; tighten the
screws, and note that copper pillars are on the back of logo; keep the hole
alignment.

Shown as figure C-3

C-3![IMG_256](media/761f854a4683c8f36cbd6a1b02d577d8.png)

![IMG_256](media/761f854a4683c8f36cbd6a1b02d577d8.png)

**Components：**

① Complete Accessory C-1

② Complete Accessory C-3

③ 1pcs M3X10MM flat-head screw

④ 1pcs M3 nut

**Tools：**

① M3 screwdriver x1

**Assembly:**

Put the M3 nut inside cross hole of Acrylic plate and fix the two Acrylic plate
together with a M3X10MM flat-head screw, shown as figure C-4;

keep the hole alignment;

Gently tighten the screw to acrylic, avoiding breaking up the acrylic plate.

Shown as figure C-4

C-4![IMG_256](media/761f854a4683c8f36cbd6a1b02d577d8.png)

![IMG_256](media/761f854a4683c8f36cbd6a1b02d577d8.png)

**Components：**

① Complete Accessory C-4

② 2pcs M3X10MM flat-head screws

③ 2pcs M3 nuts

④ 1pcs 18650 battery case

**Tools：**

① M3 screwdriver x1

**Assembly:**

Align the battery case to the holes on Acrylic plate, and fix it with screws
from the bottom up, shown as figure C-5;

keep the hole alignment;

Battery case lead is under the logo direction.

Shown as figure C-5

C-5![IMG_256](media/761f854a4683c8f36cbd6a1b02d577d8.png)

![IMG_256](media/761f854a4683c8f36cbd6a1b02d577d8.png)

**Components：**

① Complete Accessory C-5

② 1pcs NANO control board

③ 1pcs NANO shield

④ 4pcs M3X6MM cross screws

**Tools：**

① M3 screwdriver x1

**Assembly:**

Align the NANO shield to the holes of four M3x10MM copper pillar mounted on
Acrylic top plate, shown as figure C;

keep the hole alignment; gently tighten the screws to pillars with a M3
screwdriver.

Stack the NANO control board onto the NANO shield.

Shown as figure C

C![IMG_256](media/761f854a4683c8f36cbd6a1b02d577d8.png)

##### Fix Servos to Body

![IMG_256](media/761f854a4683c8f36cbd6a1b02d577d8.png)

**Components：**

① 4pcs M2x10MM screws

② 4pcs M2 nuts

③ 2pcs 9G Servo

④ 1pcs frog head bottom acrylic

**Tools：**

① M3 screwdriver x1

**Assembly:**

Peel the adhesive backing off the Acrylic plate.

Fix the servo to acrylic plate with M2x10MM screws and M2 nuts, shown as figure
D-1;

keep the hole alignment; servo rotation spin is on the same side. Ensure the
servo angle is in 90°.

Shown as figure D-1

D-1![IMG_256](media/761f854a4683c8f36cbd6a1b02d577d8.png)

![IMG_256](media/761f854a4683c8f36cbd6a1b02d577d8.png)

**Components：**

① 4pcs M1.2x5MM tapping screws

② 2pcs white servo mounts

③ 2pcs Acrylic plates

**Tools：**

① M3 screwdriver x1

**Assembly:**

Peel the adhesive backing off the Acrylic plate.

Fix the white servo mounts to acrylic plate with M1.2x5MM tapping screws from
right to left, shown as figure D-2;

keep the hole alignment;

Shown as figure D-2

D-2![IMG_256](media/761f854a4683c8f36cbd6a1b02d577d8.png)

**Components：**

① 4pcs M1.2x5MM tapping screws

② 2pcs white servo mounts

③ 2pcs Acrylic plates

**Tools：**

① M3 screwdriver x1

**Assembly:**

Peel the adhesive backing off the Acrylic plate.

Fix the white servo mounts to acrylic plate with M1.2x5MM tapping screws from
right to left, shown as figure D-2;

keep the hole alignment;

Shown as figure D-2

![IMG_256](media/761f854a4683c8f36cbd6a1b02d577d8.png)

**Components：**

① Accessory D-1

② Accessory D-2

③ 2pcs M2X4 screws (included in servo bag)

**Tools：**

① M3 screwdriver x1

**Assembly:**

Plug the Accessory D-2 acrylic into servo spin and fix them with M2X4 screws,
shown as figure D;

Note should keep the servo angle 90°. (servo angle has been adjusted to 90°, so
that cannot change by hand; maybe the servo is set to 90° but fail to be
installed in 90° with acrylic, no worry, just get as close to 90° as possible
and you can adjust the angle later in the program.)

Shown as figure D

D![IMG_256](media/761f854a4683c8f36cbd6a1b02d577d8.png)

##### Complete Frog

![IMG_256](media/761f854a4683c8f36cbd6a1b02d577d8.png)

**Components：**

① Accessory A-B

② Accessory D

③ 4pcs M3X10MM cross screws

④ 4pcs M3 nuts

**Tools：**

① M3 screwdriver x1

**Assembly:**

First turn the Accessory D servo acrylic to 90°, shown as figure A-B-D;

Fix the acrylic plates together with M3X10MM cross screws and M3 nuts;

Same process for the two legs;

Note that gently tighten the screws to avoid damage the acrylic.

Shown as figure A-B-D

A-B-D![IMG_256](media/761f854a4683c8f36cbd6a1b02d577d8.png)

**Components：**

① Accessory A-B

② Accessory D

③ 4pcs M3X10MM cross screws

④ 4pcs M3 nuts

**Tools：**

① M3 screwdriver x1

**Assembly:**

First turn the Accessory D servo acrylic to 90°, shown as figure A-B-D;

Fix the acrylic plates together with M3X10MM cross screws and M3 nuts;

Same process for the two legs;

Note that gently tighten the screws to avoid damage the acrylic.

Shown as figure A-B-D

![IMG_256](media/761f854a4683c8f36cbd6a1b02d577d8.png)

**Components：**

① Accessory A-B-D

② Accessory C

③ 4pcs M3X6MM cross screws

**Tools：**

① M3 screwdriver x1

**Assembly:**

First turn the Accessory A-B-D acrylic to 90°, shown as figure A-B-C-D;

Align the four pillars on Accessory C to the holes of Accessory A-B-D acrylic;

From the bottom up, use four M3X6MM screws to fix them gently, avoiding breaking
up the acrylic plates.

Shown as figure A-B-C-D

The frog robot is installed well.

The final part is to connect all the wires.

A-B-C-D![IMG_256](media/761f854a4683c8f36cbd6a1b02d577d8.png)

##### Hookup Guide

Connect the HC-SR04 ultrasonic sensor to keyestudio NANO shield using 4pin
female to female jumper wires. VCC pin to 5V(V), Trig pin to digital 6 (S), Echo
pin to digital 7 (S), GND pin to GND(G);

(The ultrasonic sensor wiring can refer to the Project 4)

Connect the signal wire (orange) of 4 servo motors to digital pin5,4,3,2
separately; brown wire to GND(G); red wire to 5V (V).

(The 4 servos wiring can refer to the Project 3)

![7](media/d8b18d2dca2e224473a82a94269aecf1.png)

The 4 servo motors’ wiring figure:

**---------------**

**\| O O \|**

**\|---------------\|**

**YR D3==\> \|  \|  \<== YL D2**

**---------------**

**\|\| \|\|**

**\|\| \|\|**

**RR D5==\> ----- ------  \<== RL D4**

**\|----- ------\|**

Plug in the Keyestudio HM-10 Bluetooth-4.0 module to pin header TX, RX, GND, 5V
on the keyestudio NANO shield.

![](media/3d07bdd58ff72b3a67e717dba3d81047.png)

### Project 5: Walk

![画板 1mdpi](media/c38c6110815744b452d5a9e56ebc5550.jpeg)

**Circuit Design**

After completing the robot assembly, you’ll see the 4 Servo motors on the robot
are connected well to the keyestudio Nano ch340 shield.

We have introduced the knowledge of how to adjust the Servo angle.

In the circuit, we are going to make the 4 Servo motors switch different angles
using keyestudio Nano ch340 shield, so as to operate the frog robot walk.

**How it works?**

When design the Otto frog robot, should first design the 4 Servo motors’
position and corresponding control pins.

Check the detailed instructions for servo control pins. As the figure shown
below.

**---------------**

**\| O O \|**

**\|---------------\|**

**YR D3==\> \|  \|  \<== YL D2**

**---------------**

**\|\| \|\|**

**\|\| \|\|**

**RR D5==\> ----- ------  \<== RL D4**

**\|----- ------\|**

**Hookup Guide:**

Simply stack the keyestudio Nano ch340 into the keystudio NANO shield.

Connect the Servo pin to digital pin 2, 3, 4, 5 separately.

**![4](media/ec30591f93f8e594e2e1bb9e4f4c202f.png)**

The most important step is to adjust the servo motors used in the robot via
program. The adjustment here determines the quality of the frog walking and
various postures:

First should adjust the servo of frog robot because there is an error when
installing the servo.

Adjust the servo of the D2 pin first; adjust to a positive value, it will rotate
to the right of the frog robot.

Go to **“Control”**, drag out the **setup**
block![](media/739e0b2b159c96df5fa938e10a13f5be.png); Enter **“robot”** and
click **“Frog_Robot”**, and find the block:

![](media/f76704edafd9ceafc860fb5e8bc69b47.png)

Then drag out this block into **setup** block:

![](media/bf17246b271510bfee3ca06eebabd2e6.png)

The values filled in the leg and foot are used to set the corresponding rotation
angle of servo installed in frog robot’s legs and feet.

For instance, set to adjust the left leg **10**, other values no change; upload
the code success, the left leg of robot will rotate 10°to the right.

![](media/b306a7e1b6dc7fa8d599b2926c4c2516.png)

On the contrary, set to adjust the left leg **-10**, other values no change;
upload the code success, the left leg of robot will rotate 10°to the left.

(Note: before upload the code, don’t plug in Bluetooth module. Otherwise, code
upload fails. Should upload the code success, and then plug in Bluetooth
module.)

![](media/6182e1c95d71a06eb0589383c1ec0dfb.png)

Adjust the servo of the D3 pin, as same as adjust the servo direction of the D2
pin, adjust the right leg.

Adjust the servo of the D4 pin, as same as adjust the servo direction of the D2
pin, adjust the left foot.

Adjust the servo of the D5 pin, as same as adjust the servo direction of the D2
pin, adjust the right foot.

You can change the corresponding value to adjust the direction of D3 pin servo,
D4 pin servo and D5 pin servo.

Now you’ve learned how to set the rotation angle of D2, D3, D4 and D5 servo.

Because each of us might not install the frog robot in a very upright state. So
it is necessary to adjust the frog robot to the best upright state.

![](media/759f35484f4321f0f8540a64b8964904.png)

**Coding:**

Go to **“Control”**, drag out the **setup** block; and again go to
**“Frog_Robot”** and drag out the block
![](media/f76704edafd9ceafc860fb5e8bc69b47.png)into the **setup** block.

Take the robot we installed as an example, set to adjust the left leg 0, adjust
the right leg 5, adjust the left foot -5, adjust the right foot -5, to
initialize the frog robot in the best upright state.

![](media/8f9f852373ad815ba07e5f99db919b87.png)

You can also set the value in the box behind the leg and foot to get the best
upright state according to the actual situation of the frog robot you installed.

Set well the initialization state, if we want the frog robot to take 5 steps
forward, 5 steps backward, stand and stop for 1 second, turn left for 5 steps,
turn right for 5 steps, stand and stop for 1 second, how to write the program?

Go to **“Frog_Robot”** to drag out the block
![](media/b9ea1b73b9d06e3180a4597e438c728d.png), and change the step number to
5, speed at any value, here the default speed value as 2, so the frog robot will
take 5 steps forward with a speed of 2.

Then we drag out the block ![](media/c0680356f2d25e3a5b7d6dd3ddfbbe47.png) and
change the step number to 5, keep the same speed of 2.

And again go to drag and drop the block
![](media/f65f9ddb66c21ec7ea8bbabd1ce47a1b.png); go to **“Control”**, drag out
the delay block![](media/e122a23938ea63b69e738937d1a30ef4.png).

![](media/b01c668aaf7841ca59f8b9ed69974f45.png)

Next go to **“OTTO_Frog”** , drag out the block
![](media/591f4e485e0f551f27d640a3095a1c15.png),
![](media/42bef7e0aaa96a394adaf4aae0fb6637.png), and
![](media/f65f9ddb66c21ec7ea8bbabd1ce47a1b.png), keep the same speed 2, change
the step number to 5. And again add a delay time in 1000ms.

![](media/d2cbc9c6fb26bdc39df67394e4db4c8e.png)

Up till now, we’ve wrote well the program that the frog robot to take 5 steps
forward, 5 steps backward, stand and stop for 1 second, turn left for 5 steps,
turn right for 5 steps, stand and stop for 1 second.

Next upload this program code to see the result.

**Note:** should upload the code success first, then plug in Bluetooth module.
Otherwise, code upload fails.

![](media/4d95ac3bc99a328c0aefca2c6e474adc.png)

**Result**

Done uploading the code, press down the Power_Switch on Nano Shield.

The Otto frog robot is ready to walk 5 steps forward, back 5 steps, keep
standing for 1 second, turn left for 5 steps, turn right for 5 steps, keep
standing for 1 second, alternately and loop.

![](media/05e0aa85744b2cdda4ce2f10d978d1fc.png)

![青蛙](media/3fec32944bd352ccb20b2552d93c2753.png)

### Project 6: Dance

![IMG_256](media/b3a76280ed9f1e2243a22822846f0257.jpeg)

**Circuit Design**

Based on the robot walks circuit, we are able to use the same electrical
components and wiring method. Just change the code to make the frog robot dance.

**Hookup Guide:**

Stack the Nano ch340 onto the Nano shield;

Connect 4 servo motors to digital pin5,4,3,2 separately.

**![4](media/ec30591f93f8e594e2e1bb9e4f4c202f.png)**

**Coding:**

First, we adjust the optimal initial state of frog robot.

Go to **“Control”**, drag out the **setup** block; Enter **“robot”** and click
**“Frog_Robot”**, and drag out the
block![](media/f76704edafd9ceafc860fb5e8bc69b47.png)into the **setup** block.

Take the robot we installed as an example, set to adjust the left leg 0, adjust
the right leg 5, adjust the left foot -5, adjust the right foot -5, to
initialize the frog robot in the best upright state.

![](media/8f9f852373ad815ba07e5f99db919b87.png)

And again enter **“robot”** and click **“Frog_Robot”**, drag and drop the
block![](media/96cca96f325e17fb1b1a8dfe3ad3f563.png), speed value can change
randomly; here the default speed value as 2.

Go to **“Control”**, drag out the
block![](media/46381b6119f289d222018b20a7517959.png)and change as from 0 to 2
step 1. And drag out the
block![](media/f2b6aa14fa3f365ff9ca57771d2abeb7.png)from **“Frog_Robot”** into
the block just made.

You will get the complete
block![](media/ee5715d644f4c13bfe7694c0b0a9736e.png)and duplicate this block,
drag out the block![](media/bc7c1c1f460260003a6d22256904e9b7.png) to replace the
block![](media/f2b6aa14fa3f365ff9ca57771d2abeb7.png).

So now you can get a small part of code string like below:

![](media/2bf12e16ac5560fc9e8d6c5110eaee5f.png)

Next drag out the
block![](media/e0863defa3be213ae11a0f7b974e4ee3.png)and![](media/0cbca17b33d591c6148bb07a05d5b49c.png),
change the step number to 3 and keep the speed value 2.

Followed by dragging and dropping the
block![](media/140111bfd031b12bf3f589902106ba9a.png), duplicate this block
twice, keep the step number 1 and respectively change the speed value as 5, 1,
3.

![](media/3b9309e9a782b0d3bc04cf8039c2e425.png)

Go to **“Control”**, drag out the
block![](media/46381b6119f289d222018b20a7517959.png)and change as from 0 to 2
step 1. And drag out the
block![](media/7fbd1c907ce73587c6021ab9e044f25c.png)from **“Frog_Robot”** into
the block just made. You will get the complete
block![](media/cfa5c47c545c2ffd960ee22922488457.png);

And again drag and drop the
block![](media/1d5e9310b79b5a4ed5ea7058b7918d1d.png), change the step number to
5, speed value as 2; drag out the
block![](media/be13035e1e799a3a3374cc7e8450132a.png)beneath the block you just
made.

Go to drag and drop the block![](media/c188ee778bf5457e25f22d6803b9ae84.png)and
![](media/e827942bef72bdf99fb90f34e5d74539.png), change the both step number to
5, speed value still as 2. And drag out the
block![](media/dd6ae6134443fdb332755e2352fcf295.png)beneath the block you just
made.

Continue to drag and drop the
block![](media/c6f0e9ca42b261d8954414a12bc3108c.png), change the step number to
5, speed value still as 2.

Drag and drop the block![](media/dd6ae6134443fdb332755e2352fcf295.png)and
![](media/05c265c50ef5a184a8ffa238711bd82c.png) one after another;

![](media/98feb100d5c25a4ecad0a13f4d4f03cd.png)

Go to **“Control”**, drag out the
block![](media/46381b6119f289d222018b20a7517959.png)and change as from 0 to 2
step 1. And drag out the
block![](media/bc7c1c1f460260003a6d22256904e9b7.png)from **“Frog_Robot”** into
the block just made. You will get the complete
block![](media/3e532f9d10367800f1e0736d0b1e8a48.png)

And continue to drag and drop the
block![](media/dd6ae6134443fdb332755e2352fcf295.png)and![](media/c9261491a8e754d9ee70c4c415594162.png).

Then duplicate the block![](media/2e715a1d2a63c5698c2d65e9e3cbc5f5.png)once, and
drag and drop the block![](media/dd6ae6134443fdb332755e2352fcf295.png).

![](media/bc9f273311af169b3f6f778be3db77f0.png)

Until now, we’ve wrote well the program that make frog robot dance. Upload the
complete code to check it.

**Note:** should upload the code success first, then plug in Bluetooth module.
Otherwise, code upload fails.

![](media/94b3a88e626f00f5f3c558f4e2a1faf5.png)

**Result**

Done uploading the code, press down the Power_Switch on Nano Shield.

The Otto frog robot will dance. You will see unbelievable dancing movements.

![画板 36 副本 2mdpi](media/2df0a13f062faaebf900a76fb9c5162d.jpeg)

### Project 7: Follow

![画板 1mdpi](media/238fec200dd61981c3327e16e23892e9.jpeg)

**Circuit Design**

In the above sections, we have introduced how to use ultrasonic sensor to detect
the front obstacle distance. We also operate the multiple style movements of
frog robot.

In this circuit, we can first measure the distance of obstacle ahead with
ultrasonic sensor, then navigate the robot’s movement style by distance value,
so as to achieve the follow function.

**The specific logic of ultrasonic follow is as shown below:**

| **Detection**  | **Measured distance of front obstacles** | **Distance (unit: cm)** |
|----------------|------------------------------------------|-------------------------|
| Settings       | Frog robot initially stands              |                         |
| If             | distance＞20 and distance＜60            |                         |
| Status         | The robot advances 1 step (speed is 2)   |                         |
| If             | distance＞10 and distance≤20             |                         |
|                | distance≥60                              |                         |
| Status         | Keep standing                            |                         |
| If             | distance ≤10                             |                         |
| Status         | Back 1 step (speed is 2)                 |                         |

Based on the circuit design, we can start making robot follow obstacles with
ultrasonic sensor. Follow the wiring diagram and test code below.

**Hookup Guide:**

Stack the Nano ch340 onto the Nano shield; connect ultrasonic sensor to Nano
shield, VCC pin to 5V(V), Trig pin to digital 6 (S), Echo pin to digital 7 (S),
GND pin to GND(G). Connect 4 servo motors to digital pin5,4,3,2 separately.

**![5](media/23e34439fe40b36be5b61f15af7eab50.png)**

**Coding:**

The four servomotors, an ultrasonic sensor and power supply have been connected
well. Achieving the following function under the circumstance of ultrasonic
measuring distance, we should do as follows:

Go to **“Control”**, drag out the **setup** block; Enter **“robot”** and click
**“Frog_Robot”**, and drag out the
block![](media/f76704edafd9ceafc860fb5e8bc69b47.png)into the **setup** block.

Take the robot we installed as an example, set to adjust the left leg 0, adjust
the right leg 5, adjust the left foot -5, adjust the right foot -5, to
initialize the frog robot in the best upright state.

![](media/8f9f852373ad815ba07e5f99db919b87.png)

And next go to **“Variables”** to drag out the
block![](media/85c2a15f4ba9df565f9839cf0aea97a9.png). Drag out the
block![](media/3da89ca00455bf572b998cb2af07c581.png)from the **“Math”** into the
block you just made, like ![](media/16970bf95a7b14473652186dd6851975.png);
modify the “item” as “distance” and assign the value 0, so that set up a
variable![](media/94766f5d55d8c53b72904153a647990b.png).

A variable is like a box, and a new variable is like making a box; we can give
the box a name, like we just called it “distance”.

The things placed inside the box can be changed, like we can place oranges,
apples, pears, etc.

The function of the variable box in this program is to load the distance digit.
With this box called “distance”, we can store the measured distance digit
between ultrasonic sensor and front obstacle. So every time I mention distance,
it refers to the distance value measured by the ultrasonic sensor at that time.

Go to **“Variables”**, drag out the
block![](media/1274876729c45ce2d76901cbb6f59c94.png); and drag out the
block![](media/8254f4b6b979325b61089a4ae400b920.png)from**“Frog_Robot”** into
the block just made.

You will get the complete block![](media/58dda37a3038a180d929d7e82151dd50.png).

In order to observe the distance value measured by ultrasonic sensor on the
serial monitor, we can add a serial port block.

Go to the **“SerialPort”**, drag out the
block![](media/22979be1ffbf0ad27870ea0606dc98d6.png)and
![](media/e6388eac9eccb22003ee2c36bbfb5bc8.png); remember to drag the serial
baud rate(9600) block into **setup** block. And go to **“Variables”**, drag the
block![](media/f572fed52bc3a0a2dc7e4087181bfc2d.png)into the **Serial printIn**
block.

Next judge the front obstacle distance measured by ultrasonic sensor, we could
call the statement **“if...do...else if...do”**.

Go to **“Control”**, drag out the
block![](media/7dece59487baded5d0a473ea39ccb0fd.png), then click the blue gear
icon, appear the edit box, drag the **else if** block into **if**
block![](media/1d47408acfbe58014160e18651743bbf.png)twice and then drag the
**else** block beneath the **else if** block. As shown below.

![](media/943e3bbdbc01e56584ea953a28edf0cf.png) So you can get the block
![](media/838c83fd095b2a20dfa4e84c3c1e0011.png).

Next, go to the **“Logic”**, drag out the “**=**”
block![](media/221dc3d75880b1632c042b3c1c02bd08.png)and click the drop-down
triangle to select the “**\>**”; drag
the![](media/f572fed52bc3a0a2dc7e4087181bfc2d.png)from the **“Variables”** into
the first input box at the left side of “**\>**”; drag
the![](media/d8dde88b00f9d4a598649265d432a085.png)from the **“Math”** into the
second input box at the right side of “**\>**” and remember to change the value
0 into 20. You will get the block![](media/2150b62d94a2009b8d51fd79eb4e9631.png)
and can set the value flexibly.

Then duplicate this block once, don’t forget to change the “**\>**” into
“**\<**” and type the value 60.![](media/9141c466a4cabf3115fd6d2eb749a9c0.png)

Think back, we use a word “and” when describe the judgement condition.

Inside the **“Logic”**, there is also
a![](media/f8d3551868ea3bf4238184242d54582e.png)block that return true if both
inputs are true. We drag this **“and”** block behind the **if** block; then drag
the block![](media/2150b62d94a2009b8d51fd79eb4e9631.png)into the first input box
of![](media/f8d3551868ea3bf4238184242d54582e.png)block and drag the
block![](media/9141c466a4cabf3115fd6d2eb749a9c0.png)into the second input box
of![](media/f8d3551868ea3bf4238184242d54582e.png)block.

So it represents the judgement condition “20 to 60 cm”.

![](media/2cabc14423dde914e01e0e6943f5ba17.png)

Next, go to **“Frog_Robot”** , drag the
block![](media/ba0ad4a630dc5b8e3ae2fb778b684265.png) behind the **do** block,
don’t change the step number and speed value.

Till now, we complete a part of code like below:

![](media/67dcd18da51bc889710732bcc8d8e236.png)

In this way, when the measured distance between the ultrasonic sensor and front
obstacles is greater than 20cm and smaller than 60cm, the frog robot will take
one step at the speed of 2.

In the following, try to realize another two situations:

1.  The frog robot will keep standing when the measured distance between the
    ultrasonic sensor and front obstacles is greater than 10cm, and smaller than
    or equal to 20cm; or the measured distance is greater than or equal to 60cm.

2.  The frog robot will take one step back at the speed of 2 when the measured
    distance is smaller than or equal to 10cm.

We duplicate the block![](media/489c79d9d5a0e92924f5b34da2c05749.png)once behind
the **if** block and drag it into the **else if** block; change the value
as“distance＞10”and“distance≤20”. Then go to **“Frog_Robot”** , drag the
block![](media/8e1cdbcfd9b5745a70e1a9e4894eba05.png) behind the **do** block.

Duplicate the block![](media/729edc30ce6cc1a520099a7eb7e82279.png)once, and drag
it to the **else if** block; click the drop-down triangle to select the “**≤**”;

And again drag and drop the![](media/f3866725c6cc98aec71939fe516561d5.png) to
the **do** block;

else do![](media/8e1cdbcfd9b5745a70e1a9e4894eba05.png).

Now the complete code have wrote successfully.

![](media/9529e28cc89a8392f68a7a2ba660436b.png)

(**Note:** should upload the code success first, then plug in Bluetooth module.
Otherwise, code upload fails.)

**Result**

![](media/c7869784b10a30393a516ca62cd4b326.png)

Done uploading the code, press down the Power_Switch on Nano Shield.

The Otto frog robot will move along with the front obstacle.

![ks0446-7](media/13d87167ab9672591eb55e400414f8f8.jpeg)

### Project 8: Bluetooth Control

![画板2dpi](media/2e67efb180b00e25c30f64a7bd486f13.jpeg)

We are now ready to give the frog robot capability -- Bluetooth remote control!

For a smart robot, there should be a control terminal and a controlled terminal.

In the course, we use the mobile phone as the console (host), and the HM-10
Bluetooth module (slave) connected to the robot as the controlled terminal.

When using, we need to install an APP on the phone, and connect the HM-10
Bluetooth module, then we tap the buttons on the Bluetooth APP to navigate the
multiple style movement of robot.

##### ![蓝牙信号](media/7a06e07e702bfdd7b6034da9f11d870b.png)HM-10 Bluetooth Module

![KS0455](media/7eae5f117b0a233315d747d51ff658d1.png)

**Description**

Bluetooth technology is a wireless standard technology that enables
short-distance data exchange between fixed devices, mobile devices, and building
personal area networks (using UHF radio waves in the ISM band of 2.4 to 2.485
GHz).

The robot kit is equipped with the Keyestudio HM-10 Bluetooth-4.0 V3 module,
which is a master-slave machine. When use as the Host, it can send commands to
the slave actively; when use as the Slave, it can only receive commands from the
host.

The HM-10 Bluetooth module supports the Bluetooth 4.0 protocol, which not only
supports Android mobile, but also supports iOS system.

**Technical Details**

1.  Bluetooth protocol: Bluetooth Specification V4.0 BLE

2.  No byte limit in serial port Transceiving

3.  In open environment, realize 100m ultra-distance communication with iphone4s

4.  USB protocol: USB V2.0

5.  Working frequency: 2.4GHz ISM band

6.  Modulation method: GFSK(Gaussian Frequency Shift Keying)

7.  Transmission power: -23dbm, -6dbm, 0dbm, 6dbm, can be modified by AT
    command.

8.  Sensitivity: ≤-84dBm at 0.1% BER

9.  Transmission rate: Asynchronous: 6K bytes ; Synchronous: 6k Bytes

10. Security feature: Authentication and encryption

11. Supporting service: Central & Peripheral UUID FFE0, FFE1

12. Power consumption: Auto sleep mode, stand by current 400uA\~800uA, 8.5mA
    during transmission.

13. Power supply: 5V DC

14. Working temperature: –5 to +65 Centigrade

**Pins Description**

![KS0455-1](media/995696dcbc16f527a6ed619757fa792e.png)

| **Pins**  | **Description**                                                                                                                                                                                                                                                                                                                                                                                       |
|-----------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| **BRK**   | Input pin; short press for control, or input a low-level single pulse of about 1000ms, you can implement the following features: In sleep state: The module will be woken up to normal status. If AT+NOTI is turned on, the serial port will receive OK+WAKE In connected state: The module will initiate a disconnect request In standby state: The module will return to the factory default state. |
| **RXD**   | Serial data input                                                                                                                                                                                                                                                                                                                                                                                     |
| **TXD**   | Serial data output                                                                                                                                                                                                                                                                                                                                                                                    |
| **GND**   | ground                                                                                                                                                                                                                                                                                                                                                                                                |
| **VCC**   | Power positive input 5V                                                                                                                                                                                                                                                                                                                                                                               |
| **STATE** | Output pin Indicates the working states: Slow flash in standby mode - repeat 500ms pulse; Long bright in connection state - high level. You can also set it to no flashing in the standby state, and long bright in the connection state.                                                                                                                                                             |

In the experiment, we default use the HM-10 Bluetooth module as a Slave and the
cellphone Bluetooth as a Host.

We install the Bluetooth APP on the mobile phone, connecting the Bluetooth
module; finally use the Bluetooth APP to control the robot move, displaying the
control character of each key on the serial monitor.

##### Using Bluetooth APP

**For Android system:**

1.  Click the Frog_Otto compression package to direct install the Frog_Otto APP;
    installed well, appear the icon below on your mobile phone:

    ![IMG_256](media/397d9bbd5521ee509e69d6a87ab9150c.jpeg)

    Download the Frog_Otto package from the link below:  
    <https://drive.google.com/open?id=1pymZOlVBVBWJ4s-1buKP3q5T1uM_b-tj>

Or you can download the keyestudio Frog_Otto APP direct from the Google Play:

<https://play.google.com/store/apps/details?id=com.keyestudio.frogotto>

![](media/67f411feb459f8be4b79cc4e52ab0aa0.png)

1.  Tap the Frog_Otto icon to enter the Bluetooth APP. As shown below.

![Screenshot_2019-07-16-09-55-48-95](media/bda41b60dd076825032d18264270f6b8.png)

1.  Done uploading the code to control board, connect the Bluetooth module, the
    LED on the Bluetooth module will flash.   
    Then tap the option CONNECT on the APP, searching the Bluetooth.

![Screenshot_2019-07-16-09-57-14-85](media/6b9596a31d5f44ba6a563cba447a78ab.png)

1.  Click to connect the Bluetooth. HMSoft connected, Bluetooth LED will turn on
    normally.

![Screenshot_2019-07-16-09-57-24-72](media/6ca7165b9667331ecd1c313d3871cd87.png)

**For iOS system:**

1.  Open the APP store  
    ![img_0119](media/eeccf6fd30106842b44464a3dc598f0c.png)

1.  Click to search the APP - Frog Otto

    ![](media/ef5c55343d214c9b6be0e7147fb43b54.png)

2.  Tap to open the Frog Otto

![5](media/43c9b8665ff7498dcf8fe90c506430c2.png)

1.  Done uploading the code, connect the Bluetooth module, the LED on the
    Bluetooth module will flash. To open Bluetooth, click the “Connect” on the
    APP upper left corner, searching and connecting Bluetooth.

![](media/71f79c7e082ef783460a88411c902203.png)

![Screenshot_2019-07-16-09-57-14-85](media/6b9596a31d5f44ba6a563cba447a78ab.png)

1.  Click to connect the Bluetooth. HMSoft connected, Bluetooth LED will turn on
    normally.

![Screenshot_2019-07-16-09-57-24-72](media/6ca7165b9667331ecd1c313d3871cd87.png)

##### Bluetooth Test

**Hookup Guide:**

Stack the Nano ch340 on the Nano shield and plug in the Bluetooth module to pin
TX, RX, GND, 5V.

**![5](media/b3f4dd7689185cafc91faa4d2ecdac90.png)**

**Coding:**

Downloaded the APP, and connected well the Bluetooth module and power supply, we
need to write the program code to know what signal the Bluetooth module sent.

Enter **“robot”** and click **“Frog_Robot”**, then drag out the
block![](media/8f96e704aee6f7af4c6b8b708fd473e1.png)from the **“Frog_Robot”**.
And go to **“SerialPort”**, drag out the
block![](media/22979be1ffbf0ad27870ea0606dc98d6.png) into the Bluetooth block
you just made.

Then go to **“Variables”**, drag out the
block![](media/ea24b64f26b787ffab2b6c42a3dce6aa.png)into the
block![](media/22979be1ffbf0ad27870ea0606dc98d6.png).

Now you can upload the code.

**Note:** should upload the code success first, then plug in Bluetooth module.
Otherwise, code upload fails.

![](media/ec9ad616a77287d446555278a1c88b1d.png)

**Result**

1.  Upload the code to keyestudio nano ch340 success;

2.  Stack keyestudio nano ch340 onto Nano Shield;

3.  Connect Keyestudio nano ch340 to computer with a mini USB cable.

4.  Install well the Bluetooth APP;

5.  Powered on, press down the Power_Switch on Nano Shield. The indicator on
    Bluetooth module flashes. So you can open mobile Bluetooth APP to connect
    the Bluetooth module;

6.  Once Bluetooth connected, open the serial monitor and set the baud rate to
    9600.

7.  Aimed at the Bluetooth module, tap the key on the Bluetooth APP, we can see
    the control character of each key. As the figure shown below.

![](media/69cc4fe648f8aa588daf62e6837a1f21.png)

##### Bluetooth Control Robot

**Circuit Design:**

We can combine the control character of each key on APP and extend to control
the angle of 4 servos, so as to make the robot move.

The Bluetooth APP interface is shown below:

![Screenshot_2019-07-16-09-55-48-95](media/bda41b60dd076825032d18264270f6b8.png)

| **Button**                                                                       | **Function**                             |                                                                  |
|----------------------------------------------------------------------------------|------------------------------------------|------------------------------------------------------------------|
| ![Screenshot_2019-06-17-08-21-55-51](media/48aa4aeaa4494f2ec757416cfdd4fc9b.png) | pair and connect HM-10 Bluetooth module  |                                                                  |
| ![Screenshot_2019-06-17-08-21-55-51](media/48aa4aeaa4494f2ec757416cfdd4fc9b.png) | enter Bluetooth control interface        |                                                                  |
| ![Screenshot_2019-06-17-08-21-55-51](media/48aa4aeaa4494f2ec757416cfdd4fc9b.png) | disconnect the Bluetooth                 |                                                                  |
| ![](media/c13865e804a667d7dc4f8e7810bea888.png)                                  | **Control character**                    | **Function**                                                     |
|                                                                                  | Press: F Release: S                      | Press the button, robot goes front; release to stop              |
| ![](media/10828a1a270ccdd1ac0e63d5867dfcae.png)                                  | Press: B Release: S                      | Press the button, robot goes back; release to stop               |
| ![](media/52459e4d9306ee506a539c35eb487ef2.png)                                  | Press: L Release: S                      | Press the button, robot turns left; release to stop              |
| ![](media/ce6ee9917d2f0c41acf7b698b6cefde7.png)                                  | Press: R Release: S                      | Press the button, robot turns right; release to stop             |
| ![](media/a98e1d7b57d03be394a38905561179c3.png)                                  | Press: 1 Release: S                      | Press to moonwalk to the left; release to stop                   |
| ![](media/af522bfd1c785730a355722bc3e86215.png)                                  | Press: 2 Release: S                      | Press to moonwalk to the right; release to stop                  |
| ![](media/6190ab224bfc326b08be2a54a2047a36.png)                                  | Press: 3 Release: S                      | Press to galop to the right; release to stop                     |
| ![](media/6f5b3386172f3d9d407280e15836305b.png)                                  | Press: 4 Release: S                      | Press to galop to the left; release to stop                      |
| ![](media/0635470a828d23661a54d84891205f9b.png)                                  | Press: 6 Release: S                      | Tap to tilt right, then slowly turn back                         |
| ![](media/f5f7f7ffdb61fad48b819a515e0bba87.png)                                  | Press: 7 Release: S                      | Tap for crusaito step once                                       |
| ![](media/4fc5e33179e8bd356effb7be71e6253d.png)                                  | Press: 8 Release: S                      | Press to start friction pace; release to stop                    |
| ![](media/110dafca00a4431505ada7f73491638b.png)                                  | Press: G Release: S                      | Press to flapping left and right                                 |
| ![](media/fd0803d3881e992f79106fbaa6443b14.png)                                  | Press: 9 Release: S                      | Press to jump; release to stop                                   |
| ![](media/5a5cc643091ed79b07d2748418fd4eb9.png)                                  | Press: H Release: S                      | Press to start swing motion; release to stop                     |
| ![](media/9898df3bc5434f72e01cfddcaaa86160.png)                                  | Press: J Release: S                      | Tap to slowly going up feet, then going down                     |
| ![](media/003d48d168b18a99d58965b1e8c16e1e.png)                                  | Press: P Release: S                      | Tap to dance                                                     |
| ![](media/6407796f7324e3e757e4879f6f27787d.png)                                  | Tap once to send: U Tap again to send: S | Start ultrasonic avoiding function                               |
| ![](media/bfa4afde5385b1776e514c9fdb590a1e.png)                                  | /                                        | Tap once to start the mobile gesture control; tap again to close |

Based on the circuit design, we can start building Bluetooth remote control
robot. Follow the wiring diagram and test code below.

**Hookup Guide:**

Stack the Nano ch340 on the Nano shield and plug in the Bluetooth module to pin
TX, RX, GND, 5V. (RXD to TX, TXD to RX, GND to GND, VCC to 5V)

Connect 4 servo motors to digital pin5,4,3,2 separately.

**![6.2](media/a2820073393e882b50c3f2656b541e69.png)**

**Coding:**

The four servomotors, a Bluetooth module and power supply have been connected
well. We start writing a program code for Bluetooth controlled robot. We should
do as follows:

Go to **“Control”**, drag out the **setup** block; Enter **“robot”** and click
**“Frog_Robot”**, then drag out the
block![](media/f76704edafd9ceafc860fb5e8bc69b47.png)into the **setup** block.

Take the robot we installed as an example, set to adjust the left leg 0, adjust
the right leg 5, adjust the left foot -5, adjust the right foot -5, to
initialize the frog robot in the best upright state.

![](media/8f9f852373ad815ba07e5f99db919b87.png)

After setup, read the character signal of four direction buttons on Bluetooth
APP with Bluetooth module.

Enter **“robot”** and click **“Frog_Robot”**, then drag out the
block![](media/8f96e704aee6f7af4c6b8b708fd473e1.png)from the **“Frog_Robot”**.
And go to **“SerialPort”**, drag out the
block![](media/22979be1ffbf0ad27870ea0606dc98d6.png) into the Bluetooth block
you just made.

Then go to **“Variables”**, drag out the
block![](media/ea24b64f26b787ffab2b6c42a3dce6aa.png)into the
block![](media/22979be1ffbf0ad27870ea0606dc98d6.png).

![](media/ec9ad616a77287d446555278a1c88b1d.png)

Tap and hold the button of any direction, Bluetooth module receives the
corresponding signal, and the frog robot moves in the corresponding direction.

So here require to make “option” judgement; we will use the
block![](media/a49a5d3dff85366e6e877a8239379e4b.png) from **“Control”**.

Drag out the block![](media/a49a5d3dff85366e6e877a8239379e4b.png), then click
the blue gear icon, appear the edit
box![](media/029ebb5826f9262867e49072ad4b5187.png), drag
the![](media/fe97d6e544b5d2dedfaf351b4918e15a.png)block
into![](media/9e86ba7afc530b7ec11170f0c0a8c848.png)block, turning
into![](media/780a41aa03e667f8e9e4aa031702da0a.png);

When the value of the "expression" behind the **switch** block is equal to the
value of the "constant expression" behind a **case** block, the statement
following this **case** is executed.

After executing the statement following a case, the process control is
transferred to the next case to continue execution.

Since there are 4 direction buttons in the APP, press and hold the different
direction buttons, the frog robot walks accordingly. After releasing all the
buttons, the frog robot keeps standing. Here, 5 case statements are needed.

Click the blue gear icon, appear the edit
box![](media/029ebb5826f9262867e49072ad4b5187.png), drag
the![](media/fe97d6e544b5d2dedfaf351b4918e15a.png)block
into![](media/9e86ba7afc530b7ec11170f0c0a8c848.png)block four times, final get
the statement below:

![](media/e9659dbe9266b187e4504ad0a8c4baaf.png)

Press and hold the different direction buttons, the frog robot walks
accordingly.

Go to **“Variables”**, drag out the
block![](media/ea24b64f26b787ffab2b6c42a3dce6aa.png)and drop it behind the
**“switch”**;

Tap the front button icon![](media/c13865e804a667d7dc4f8e7810bea888.png), frog
robot will take one step forward at the speed of 2.

Go to the **“Text”**, drag out the
block![](media/12ea713108d5ad292313a37f18bb4b8e.png)and drop it behind the
**“case”**.

Since press the front button, the phone Bluetooth will send a character “F” to
the Bluetooth module on the frog robot. When the Bluetooth module receives the
character “F”, it will change the “a” into “F”.

Go to the **“Frog_Robot”**, drag the
block![](media/9728c6a8d41b683d8514ff42eeb731ca.png)into **case** and keep the
same step number and speed.

Hold the back button![](media/10828a1a270ccdd1ac0e63d5867dfcae.png), the phone
Bluetooth sends a character “B” , Bluetooth module receives the character “B”,
frog robot will take one step backward at the speed of 2.

Go to the **“Text”**, drag out the
block![](media/12ea713108d5ad292313a37f18bb4b8e.png)and drop it behind the
**“case”**; change the “a” into “B”.

Go to the **“Frog_Robot”**, drag the
block![](media/75f44924417c68f8c05f750e1a1ce161.png)into **case** and keep the
same step number and speed.

Next hold the left button![](media/52459e4d9306ee506a539c35eb487ef2.png), the
phone Bluetooth sends a character “L” , Bluetooth module receives the character
“L”, frog robot will rotate to the left.

Hold the right button![](media/ce6ee9917d2f0c41acf7b698b6cefde7.png), the phone
Bluetooth sends a character “R” , Bluetooth module receives the character “R”,
frog robot will rotate to the right.

Release all the buttons, the phone Bluetooth sends a character “S” , Bluetooth
module receives the character “S”, frog robot will stop and keep standing.

It’s easy to write the code. Go to the **“Text”**, drag out the
block![](media/12ea713108d5ad292313a37f18bb4b8e.png)and drop it behind the rest
three **“case”** blocks respectively; change the “a” into “L”, “R”, “S”
respectively.

Go to the **“Frog_Robot”**, drag out the
block![](media/06236ef43c19743d9d6f51ba4968b4b8.png),
![](media/1402a193f5176bd535e9219184f8550d.png)and![](media/f2d1b1c60556ee78d1fba26ba66bc4c4.png)into
**case**; and keep the same step number and speed.

Now the complete code have wrote well. Upload the code to remotely control the
robot.

**Note:** should upload the code success first, then plug in Bluetooth module.
Otherwise, code upload fails.

![](media/b4b8755e84e61a77b51cc6b7c721b2de.png)

**Result**

1.  Upload the code to keyestudio nano ch340 success;

2.  Stack keyestudio nano ch340 onto Nano Shield;

3.  Connect Keyestudio nano ch340 to computer with a mini USB cable.

4.  Install well the Bluetooth APP;

5.  Powered on, press down the Power_Switch on Nano Shield. The indicator on
    Bluetooth module flashes. So you can open mobile Bluetooth APP to connect
    the Bluetooth module;

6.  Once Bluetooth connected, aim at the Bluetooth module, tap the key on the
    Bluetooth APP to command the robot.

Tap the key ![](media/c13865e804a667d7dc4f8e7810bea888.png), the frog robot will
go forward; tap![](media/10828a1a270ccdd1ac0e63d5867dfcae.png), go back; tap
![](media/52459e4d9306ee506a539c35eb487ef2.png), turn left; tap
![](media/ce6ee9917d2f0c41acf7b698b6cefde7.png), turn right; release all the
keys, robot stands still.

![画板 36mdpi](media/0c4e50a10bf3018b01799fd044049b86.jpeg)

### Project 9: Bluetooth Multiple Function

**Circuit Design**

How to combine multiple functions for the frog robot we’ve learned? In this
circuit, we use a complete code to program the smart car to switch different
functions with Bluetooth APP, pretty simple and easy.

![画板 1mdpi](media/c38c6110815744b452d5a9e56ebc5550.jpeg)

**Hookup Guide:**

Stack the Nano ch340 onto the Nano shield; Connect ultrasonic sensor to Nano
shield, VCC pin to 5V(V), Trig pin to digital 6 (S), Echo pin to digital 7 (S),
GND pin to GND(G). Connect 4 servo motors to digital pin5,4,3,2 separately.

Plug in the Bluetooth module to pin TX, RX, GND, 5V. (RXD to TX, TXD to RX, GND
to GND, VCC to 5V)

**![7](media/d8b18d2dca2e224473a82a94269aecf1.png)**

**Coding:**

The four servomotors, a Bluetooth module and power supply have been connected
well. We start writing a multiple program for Bluetooth controlled robot. We
should do as follows:

Go to **“Control”**, drag out the **setup** block; Enter **“robot”** and click
**“Frog_Robot”**, then drag out the
block![](media/f76704edafd9ceafc860fb5e8bc69b47.png)into the **setup** block.

Take the robot we installed as an example, set to adjust the left leg 0, adjust
the right leg 5, adjust the left foot -5, adjust the right foot -5, to
initialize the frog robot in the best upright state.

![](media/8f9f852373ad815ba07e5f99db919b87.png)

After setup, read the character signal of four direction buttons on Bluetooth
APP with Bluetooth module.

Enter **“robot”** and click **“Frog_Robot”**, then drag out the
block![](media/8f96e704aee6f7af4c6b8b708fd473e1.png)from the **“Frog_Robot”**.
And go to **“SerialPort”**, drag out the
block![](media/22979be1ffbf0ad27870ea0606dc98d6.png) into the Bluetooth block
you just made.

Then go to **“Variables”**, drag out the
block![](media/ea24b64f26b787ffab2b6c42a3dce6aa.png)into the
block![](media/22979be1ffbf0ad27870ea0606dc98d6.png).

![](media/ec9ad616a77287d446555278a1c88b1d.png)

Tap and hold the button of any direction, Bluetooth module receives the
corresponding signal, and the frog robot moves in the corresponding direction.

So here require to make “option” judgement; we will use the
block![IMG_256](media/d67ddd32314e54818d969401220891da.png)

from **“Control”**.

Drag out the block![IMG_256](media/d67ddd32314e54818d969401220891da.png), then
click the blue gear icon, appear the edit
box![IMG_256](media/56fe1ff4fdfcc678c20691e443e8a8a7.png), drag
the![IMG_256](media/a5096cea36eb4c6b16768b69cdc44279.png)block
into![IMG_256](media/9dc7d67ec52ac727ca45b1519f80804d.png)block, turning
into![IMG_256](media/0de40c81de78fcc586e681f503b0f38b.png);

When the value of the "expression" behind the **switch** block is equal to the
value of the "constant expression" behind a **case** block, the statement
following this **case** is executed.

After executing the statement following a case, the process control is
transferred to the next case to continue execution.

Since there are 4 direction buttons in the APP, press and hold the different
direction buttons, the frog robot walks accordingly. After releasing all the
buttons, the frog robot keeps standing. Here, 5 case statements are needed.

Click the blue gear icon, appear the edit
box![IMG_256](media/56fe1ff4fdfcc678c20691e443e8a8a7.png), drag
the![IMG_256](media/a5096cea36eb4c6b16768b69cdc44279.png)block
into![IMG_256](media/9dc7d67ec52ac727ca45b1519f80804d.png)block four times
again, final get the statement below:

![IMG_256](media/1335c221ff890848d87702c5b1050ae0.png)

Press and hold the different direction buttons, the frog robot walks
accordingly.

Go to **“Variables”**, drag out the
block![](media/ea24b64f26b787ffab2b6c42a3dce6aa.png) and drop it behind the
**“switch”**;

Hold the front button icon![](media/c13865e804a667d7dc4f8e7810bea888.png), frog
robot will take one step forward at the speed of 2.

Go to the **“Text”**, drag out the
block![IMG_256](media/d2c0313b3aa025bfdc5773f4b6ddd7c9.png)and drop it behind
the **“case”**.

Since press the front button, the phone Bluetooth will send a character “F” to
the Bluetooth module on the frog robot. When the Bluetooth module receives the
character “F”, it will change the “a” into “F”.

Go to the **“Frog_Robot”**, drag the
block![IMG_256](media/1fec7818062e836f018df4dbbbe0c793.png)

into **case** and keep the same step number and speed.

Hold the back button![](media/10828a1a270ccdd1ac0e63d5867dfcae.png), the phone
Bluetooth sends a character “B” , Bluetooth module receives the character “B”,
frog robot will take one step backward at the speed of 2.

Go to the **“Text”**, drag out the
block![IMG_256](media/d2c0313b3aa025bfdc5773f4b6ddd7c9.png)and drop it behind
the **“case”**; change the “a” into “B”.

Go to the **“Frog_Robot”**, drag the
block![IMG_256](media/6ff01180d7c156ebb1d7d7bd883f9786.png)into **case** and
keep the same step number and speed.

Next hold the left button![](media/52459e4d9306ee506a539c35eb487ef2.png), the
phone Bluetooth sends a character “L” , Bluetooth module receives the character
“L”, frog robot will rotate to the left.

Hold the right button![](media/ce6ee9917d2f0c41acf7b698b6cefde7.png), the phone
Bluetooth sends a character “R” , Bluetooth module receives the character “R”,
frog robot will rotate to the right.

Release all the buttons, the phone Bluetooth sends a character “S” , Bluetooth
module receives the character “S”, frog robot will stop and keep standing.

It’s easy to write the code. Go to the **“Text”**, drag out the
block![IMG_256](media/d2c0313b3aa025bfdc5773f4b6ddd7c9.png)

and drop it behind the rest three **“case”** blocks respectively; change the “a”
into “L”, “R”, “S” respectively.

Go to the **“Frog_Robot”**, drag out the
block![IMG_256](media/8f11ae4ad312f689762ca603f5cd6f43.png),
![IMG_256](media/20233f199e64c65573ece97f9c280520.png)and![IMG_256](media/202ef929d792b532f20487400daf48b8.png)into
**case**; and keep the same step number and speed.

Up until now, we have wrote a small part of the program:

![IMG_256](media/86e634869097482247ff4f8199296a5b.png)

Apart from the four direction button icons on the APP, we can also use some
other motion posture buttons on APP to control the frog robot.

Because there are 13 kinds of motion postures on the interface of APP, we
continue to click the blue gear icon on the
block![IMG_256](media/d67ddd32314e54818d969401220891da.png), drag
the![IMG_256](media/a5096cea36eb4c6b16768b69cdc44279.png)block
into![IMG_256](media/9dc7d67ec52ac727ca45b1519f80804d.png)block **thirteen
times**.

![](media/91bc03fe234b7ef293ab447b26af3a49.png)

Hold the button icon![](media/a98e1d7b57d03be394a38905561179c3.png), the phone
Bluetooth sends a character “1” , Bluetooth module receives the character “1”,
frog robot will moonwalk to the left.

Go to the **“Text”**, drag out the
block![IMG_256](media/d2c0313b3aa025bfdc5773f4b6ddd7c9.png)and drop it behind
the **“case”**; change the “a” into “1”.

Go to **“Frog_Robot”**, drag the
block![](media/2c2182daac381781433363e22b02af77.png)beneath **case‘1’** and keep
the same step number and speed.

Hold the button icon![](media/af522bfd1c785730a355722bc3e86215.png), the phone
Bluetooth sends a character “2” , Bluetooth module receives the character “2”,
frog robot will moonwalk to the right. Go to the **“Text”**, drag out the
block![IMG_256](media/d2c0313b3aa025bfdc5773f4b6ddd7c9.png)and drop it behind
the **“case”**; change the “a” into “2”.

Go to **“Frog_Robot”**, drag the
block![](media/7052cebaa7fa9c0d2fb25f6e6fc75b43.png)beneath **case‘2’**and keep
the same step number and speed.

Hold the button icon![](media/6190ab224bfc326b08be2a54a2047a36.png), the phone
Bluetooth sends a character “3” , Bluetooth module receives the character “3”,
frog robot will galop to the right.

Go to the **“Text”**, drag out the
block![IMG_256](media/d2c0313b3aa025bfdc5773f4b6ddd7c9.png)and drop it behind
the **“case”**; change the “a” into “3”.

Go to the **“Frog_Robot”**, drag the
block![](media/e558664439f95bd444350f8aeb2c8877.png)beneath **case‘3’**.

Hold the button icon![](media/6f5b3386172f3d9d407280e15836305b.png), the phone
Bluetooth sends a character “4” , Bluetooth module receives the character “4”,
frog robot will galop to the left.

Go to the **“Text”**, drag out the
block![IMG_256](media/d2c0313b3aa025bfdc5773f4b6ddd7c9.png)and drop it behind
the **“case”**; change the “a” into “4”.

Go to the **“Frog_Robot”**, drag the
block![](media/ed72c0e5f340ae80d80610fcdcbe37c0.png)beneath **case‘4’**.

Hold the button icon![](media/0635470a828d23661a54d84891205f9b.png), the phone
Bluetooth sends a character “6” , Bluetooth module receives the character “6”,
frog robot tilts to the left and then slowly returns.

Go to the **“Text”**, drag out the
block![IMG_256](media/d2c0313b3aa025bfdc5773f4b6ddd7c9.png)and drop it behind
the **“case”**; change the “a” into “6”. Go to **“Frog_Robot”**, drag the
block![](media/e07f03bfd85f9a754b9cf03f685aaa6e.png)beneath **case‘6’**.

![](media/697625d78d2650199c101bfd7298822d.png)

Hold the button icon![](media/f5f7f7ffdb61fad48b819a515e0bba87.png), the phone
Bluetooth sends a character “7” , Bluetooth module receives the character “7”,
frog robot will slide once.

Go to the **“Text”**, drag out the
block![IMG_256](media/d2c0313b3aa025bfdc5773f4b6ddd7c9.png)and drop it behind
the **“case”**; change the “a” into “7”.

Go to **“Frog_Robot”**, drag the
block![](media/3e2c6f1bb136517a1d7256d5fe4cae5f.png)beneath **case‘7’**and
duplicate this block twice; keep step number as 1, separately change the speed
value2 to **5, 1, 3**.

Hold the button icon![](media/4fc5e33179e8bd356effb7be71e6253d.png), the phone
Bluetooth sends a character “8” , Bluetooth module receives the character “8”,
frog robot is rubbing.

Go to the **“Text”**, drag out the
block![IMG_256](media/d2c0313b3aa025bfdc5773f4b6ddd7c9.png)and drop it behind
the **“case”**; change the “a” into “8”.

Go to **“Frog_Robot”**, drag the
block![](media/6d46e3ce45e7ca284b73208c374682e7.png)beneath **case‘8’**.

Hold the button icon![](media/110dafca00a4431505ada7f73491638b.png), the phone
Bluetooth sends a character “G” , Bluetooth module receives the character “G”,
frog robot is flapping.

Go to the **“Text”**, drag out the
block![IMG_256](media/d2c0313b3aa025bfdc5773f4b6ddd7c9.png)and drop it behind
the **“case”**; change the “a” into “G”.

Go to **“Frog_Robot”**, drag the
block![](media/83ceba1a98b389802adf30b4b9beb5e8.png)beneath **case‘G’**. Keep
the same speed value 4.

![](media/562b969a5a686f456f8c8cbb191a9b32.png)

Hold the button icon![](media/fd0803d3881e992f79106fbaa6443b14.png), the phone
Bluetooth sends a character “9” , Bluetooth module receives the character “9”,
frog robot jumps.

Go to the **“Text”**, drag out the
block![IMG_256](media/d2c0313b3aa025bfdc5773f4b6ddd7c9.png)and drop it behind
the **“case”**; change the “a” into “9”.

Go to **“Frog_Robot”**, drag the
block![](media/7ddbde55f305c39260ca9f9a01b515ea.png)beneath **case‘9’**.

Hold the button icon![](media/5a5cc643091ed79b07d2748418fd4eb9.png), the phone
Bluetooth sends a character “H” , Bluetooth module receives the character “H”,
frog robot swings.

Go to the **“Text”**, drag out the
block![IMG_256](media/d2c0313b3aa025bfdc5773f4b6ddd7c9.png)and drop it behind
the **“case”**; change the “a” into “H”.

Go to **“Frog_Robot”**, drag the
block![](media/a736c20de4eb9bdb9b873c815f935a2a.png)beneath **case‘H’**. keep
the same step number and speed.

Hold the button icon![](media/9898df3bc5434f72e01cfddcaaa86160.png), the phone
Bluetooth sends a character “J” , Bluetooth module receives the character “J”,
frog robot is slowly going up the feet then going down.

Go to the **“Text”**, drag out the
block![IMG_256](media/d2c0313b3aa025bfdc5773f4b6ddd7c9.png)and drop it behind
the **“case”**; change the “a” into “J”.

Go to **“Frog_Robot”**, drag the
block![](media/ead6d8295f6567c1a7bce270d2f89e7a.png)beneath **case‘J’**. keep
the same speed value 2.

Up until now, we have completed another small part of the program:

![](media/922c7e826d1a032bb8865773824f46de.png)

Hold the button icon![](media/003d48d168b18a99d58965b1e8c16e1e.png), the phone
Bluetooth sends a character “P” , Bluetooth module receives the character “P”,
frog robot is dancing.

Followed by go to the **“Text”**, drag out the
block![](media/3436492a5976323f853f1b22b6e1c1dd.png)and drop it behind the
**“case”**; change the “a” into “P”.

**Next, ready to write the code for frog robot dancing.**

Go to **“Functions”**, drag out the
block![](media/b77961c6d45197f81170943443077d7f.png)and change
as![](media/c2463eaece28084572fe81219289b79a.png).

Here need to set up a variable.

First go to **“Variables”**, drag out the
block![](media/8e3f5f99eb2b93d1dd12d543435b58a3.png); then drag the
block![](media/1891e9cf073ab313314718a4bddb8562.png)from **“Math”** into value
behind; replace “item” with “flag”, and default as an integer, assign the
variable “flag” to 0.

![](media/a1529cea8fe038445c1d1ea13419fa4c.png)

Then drag this block![](media/a1529cea8fe038445c1d1ea13419fa4c.png)
into![](media/f586b493653d0b38619e4f53054813ca.png)block, so that set up a
variable block![](media/11c6f77bcdf0a343487ca007640b9997.png).

Now go to **“Variables”**, drag out the
block![](media/ce5130bae8092a7e3a55ba1fd34caec4.png)into the
block![](media/c2463eaece28084572fe81219289b79a.png) ，drag a
block![](media/1891e9cf073ab313314718a4bddb8562.png)into the
block![](media/ce5130bae8092a7e3a55ba1fd34caec4.png)and assign a value 1.

Go to **“Control”**, drag out the
block![](media/cb28c2a2ab42d260ffd21fbd397258ae.png) into the
block![](media/ca36d87cc10002f3250520c56dcc859e.png);

Go to **“Logic”**, drag the block![](media/b868e3156f315a320d081e1f6781a054.png)
into the block![](media/cb28c2a2ab42d260ffd21fbd397258ae.png). And drag the
variable block![](media/11c6f77bcdf0a343487ca007640b9997.png)into the first
input box of block![](media/b868e3156f315a320d081e1f6781a054.png); drag a
block![](media/1891e9cf073ab313314718a4bddb8562.png)into the second input box of
block![](media/b868e3156f315a320d081e1f6781a054.png)and change the digit 0 into
1.

![](media/95ea2d63812e7878e83de690f8036808.png)

Go to **“Frog_Robot”**, drag the
block![](media/08701d3470b0e0b359347bb869c390d3.png)into
![](media/a968bf5e8419a81d8f865604b311e107.png); can change the speed value
randomly and here default by 2.

Go to **“Control”**, drag out the
block![](media/516d66ef145f33e5556e4f77d2699c03.png), change from 0 to 2 step 1;

Go to **“Frog_Robot”**, drag the
block![](media/70fb59f9069fe06ae51ca0bf75fcf2a4.png)into
![](media/7e64d82b5357b10e67a74b083a6f130b.png); get the
block![](media/72a7addc2b3f95da6072906daf39e27b.png) and duplicate this block
once, then drag the block![](media/7ddbde55f305c39260ca9f9a01b515ea.png)to
replace the block![](media/70fb59f9069fe06ae51ca0bf75fcf2a4.png).

Drag out the
block![](media/a87d343ec7ea3d3050c9984dfb86dbed.png)and![](media/dce763a2a910e1baa8a666b304e73752.png)
separately, change the both step number to 3 and keep the speed 2. Next, drag
out the block![](media/e4b9a3967a7ce363b3d0cca4c933d5e9.png) and duplicate
twice, keep the step number 1 and change the speed 2 to 5、1、3 respectively.

![](media/dbe9ef4a7bcf6219dcb57ede6d367515.png)

Next go to **“Control”**, drag out the
block![](media/ecc6ca16a66d005cd11444eb09d5ed9d.png), change from 0 to 2 step 1;

Go to **“Frog_Robot”**, drag the
block![](media/8e4aa631a781e1a49e30f547f41c84b1.png)into
![](media/7e64d82b5357b10e67a74b083a6f130b.png), getting the
block![](media/d72555b33aaba6679a6b50dadd06d59f.png) .

Drag out the block![](media/ea3033a6f5fd79742520f2f4cd4dd37c.png), change the
step number to 5 and keep the speed 2. Next, drag out the
block![](media/6752838b3af937c208b770cdb5e120e0.png)beneath the block just made;
followed by drag out the![](media/17681fcf0c5041bdfd59f7e37b3bd277.png)and
![](media/b159cc66b186b91942ccd72ffdf48e2d.png), change the both step number to
5 and keep the speed 2; then drag and drop the
block![](media/8d0e288a146d751c04270a7c37a6c3af.png)and
![](media/6be1f360d6d2083550bc91160c08dc8a.png).

![](media/831e2d0a4d4165fee87ab17339c14787.png)

Go to **“Control”**, drag out the
block![](media/ecc6ca16a66d005cd11444eb09d5ed9d.png), change from 0 to 2 step 1;

Go to **“Frog_Robot”**, drag the
block![](media/7ddbde55f305c39260ca9f9a01b515ea.png)into
![](media/7e64d82b5357b10e67a74b083a6f130b.png), getting the
block![](media/a0cf10c3fcb846b929f3069a1d442559.png).

Then drag and drop the block![](media/8d0e288a146d751c04270a7c37a6c3af.png)and
![](media/45dd1aaa7edc7f1dd1835954fba2781a.png).

Now, we duplicate the block ![](media/a0cf10c3fcb846b929f3069a1d442559.png)once;
drag and drop the block![](media/8d0e288a146d751c04270a7c37a6c3af.png); go to
**“Variables”**, drag out the
block![](media/ba8dab197f183157d4ae021f32238a27.png)beneath the block just made
and assign a value 0. Then drag out the
block![](media/fd5841d3e1f3d1718c2966c74c55087f.png) beneath the flag block; go
to the **“Text”**, drag out the
block![](media/a9b5ae1ad7c69cc0a0afb34f83a84ff7.png)and drop it behind
the![](media/fd5841d3e1f3d1718c2966c74c55087f.png); change the “a” into “S”.

![](media/d2e13e4ac4fa9f717624eb005b5ca3ec.png)

Now drag the above code string into the dance code string. Shown as below.

![](media/4b1939bdfeb916058be6e7dcc2c7c0c8.png)

Finally go to **“Functions”**, drag out the
block![](media/2063471269732998f71a6049adb386bd.png) beneath the **case‘P’**

![](media/e9a5a9352c81ac71589180a2b92b08f1.png)

Okay now we have completed a part of program for robot dancing.

Hold the button icon![](media/6407796f7324e3e757e4879f6f27787d.png), the phone
Bluetooth sends a character “U” , Bluetooth module receives the character “U”,
starting the function of ultrasonic following of frog robot.

Go to the **“Text”**, drag out the
block![](media/a9b5ae1ad7c69cc0a0afb34f83a84ff7.png)and drop it behind the
**“case”**; change the “a” into “U”.

**Next, we are ready to write the program code for robot to follow objects.**

Go to **“Functions”**, drag out the
block![](media/5f4c6a3bc58755176e8bc2ecf403d29e.png)and change
as![](media/6276eba815cffd7c851f7845ab816e86.png); then go to **“Variables”**,
drag out the block![](media/ba8dab197f183157d4ae021f32238a27.png)into the
block![](media/6276eba815cffd7c851f7845ab816e86.png) ，drag a
block![](media/c21e2a20d2d2e1dea350990e31f479ef.png)into the
block![](media/ba8dab197f183157d4ae021f32238a27.png)and assign a value 1.

Go to **“Control”**, drag out the
block![](media/cb28c2a2ab42d260ffd21fbd397258ae.png) into the
block![](media/6276eba815cffd7c851f7845ab816e86.png);

Go to **“Logic”**, drag the block![](media/b868e3156f315a320d081e1f6781a054.png)
into the block![](media/cb28c2a2ab42d260ffd21fbd397258ae.png). And drag the
variable block![](media/11c6f77bcdf0a343487ca007640b9997.png)into the first
input box of block![](media/b868e3156f315a320d081e1f6781a054.png); drag a
block![](media/c21e2a20d2d2e1dea350990e31f479ef.png)into the second input box of
block![](media/b868e3156f315a320d081e1f6781a054.png)and change the digit 0 into
1.

![](media/6d74716de46ecba4c0c3172a5a562fdc.png)

Followed by set up a variable![](media/99d71021300b3ca6bca69e79a71abb47.png).

First go to **“Variables”**, drag out the
block![](media/8e3f5f99eb2b93d1dd12d543435b58a3.png); then drag the
block![](media/c21e2a20d2d2e1dea350990e31f479ef.png)from **“Math”** into value
behind; replace “item” with “distance”, and default as an integer, assign the
variable “flag” to 0.

![](media/c6c481ca1580f525b1391b90c4d8c6f0.png)

Then drag this
block![](media/ccd7693aa7153f11e4f4d73b48e7b6c4.png)into![](media/ae6870833976bdfb2f17f0fec861924d.png)block,
so that set up a variable block![](media/0fb6b200f28ed4ed7906e2329947e7e0.png).

Go to **“Variables”**, drag out the
block![](media/3bfa1ccbc078520de15059d8b620ea08.png); and drag out the
block![](media/6b9020171a83675bb8766252fa269848.png)from **“Frog_Robot”** into
the block just made.

You will get this block![](media/aedd826ae7e400ba62d8fd3494ff7bbd.png) and drag
it beneath the do block![](media/0dbc59f90af233fb7ff6b99ede8928e6.png)made
before.

Next, we need to observe the distance value measured by ultrasonic sensor.

To judge the front obstacle distance measured by ultrasonic sensor, we could
call the statement **“if...do...else if...do”**.

Go to **“Control”**, drag out the
block![](media/d510f9caf0d2cf8ab6addba370cb0631.png)into the **do** statement,
then click the blue gear icon, appear the edit box, drag the **else if** block
into **if** block twice![](media/8a07f97c6275d4c91824dcdbd6b77930.png)and then
drag the **else** block beneath the **else if** block.

![](media/4c1e14c2bb3df1a59064bb48731df778.png) So you can get the block
![](media/1a6e0d7a639961f4110fb84752d167ee.png).

![](media/a91d225597bed34afe409edadc0f59b1.png)

Next, go to the **“Logic”**, drag out the “**=**”
block![](media/b868e3156f315a320d081e1f6781a054.png)and click the drop-down
triangle to select the “**\>**”; drag
the![](media/99d71021300b3ca6bca69e79a71abb47.png)from the **“Variables”** into
the first input box at the left side of “**\>**”; drag
the![](media/c21e2a20d2d2e1dea350990e31f479ef.png)from the **“Math”** into the
second input box at the right side of “**\>**” and remember to change the value
0 into 20. You will get the block![](media/aafc1d487657550ad51f4cfced8ad334.png)
and can set the value flexibly.

Then duplicate this block once, don’t forget to change the “**\>**” into
“**\<**” and type the value 60.![](media/8663656abc9cd363e9960157e8f56ae5.png)

Think back, we use a word “and” when describe the judgement condition.

Inside the **“Logic”**, there is also
a![](media/11037256a44f652f8a9e2f40b0665ca2.png)block that return true if both
inputs are true. We drag this **“and”** block behind the **if** block; then drag
the block![](media/aafc1d487657550ad51f4cfced8ad334.png)into the first input box
of![](media/11037256a44f652f8a9e2f40b0665ca2.png)block and drag the
block![](media/8663656abc9cd363e9960157e8f56ae5.png)into the second input box
of![](media/11037256a44f652f8a9e2f40b0665ca2.png)block.

So it represents the judgement condition “20 to 60 cm”.

![](media/fdd4ef3ee8c04e11784066f532cb1be2.png)

Next, go to **“Frog_Robot”** , drag the
block![](media/3e47382126c53ecc7b34bc7b730b6c16.png) behind the **do** block,
don’t change the step number and speed value.

![](media/65aa5a960c80d55699faaa35f8f4b37c.png)

In this way, when the measured distance between the ultrasonic sensor and front
obstacles is greater than 20cm and smaller than 60cm, the frog robot will take
one step at the speed of 2.

In the following, try to realize another two situations:

1.  The frog robot will keep standing when the measured distance between the
    ultrasonic sensor and front obstacles is greater than 10cm, and smaller than
    20cm; or the measured distance is greater than or equal to 60cm.

2.  The frog robot will take one step back at the speed of 2 when the measured
    distance is smaller than or equal to 10cm.

We duplicate the block![](media/1d82317591ec66d3c1d7ea10855371e0.png)once behind
the **if** block and drag it into the **else if** block; change the value
as“distance＞10”and“distance≤20”. Then go to **“Frog_Robot”** , drag the
block![](media/ac0816839e68f0f2439bac153368eec9.png) behind the **do** block.

Duplicate the block![](media/f68ffd874214eebb30d2b2141f060614.png)once, and drag
it to the **else if** block; click the drop-down triangle to select the “**≤**”;

And again drag and drop the![](media/de6af58c54be388f10bf1a8b2f53a46b.png) to
the **do** block;

else do![](media/ac0816839e68f0f2439bac153368eec9.png).

![](media/24011a4941d65ece00df457bcd40bffd.png)

Next drag out the block![](media/733ed0872f3b625ebcb27dba066b9d2f.png)from the
**“Frog_Robot”** beneath the
block![](media/a968bf5e8419a81d8f865604b311e107.png)you have made.

Go to **“Control”**, drag out the
block![](media/d510f9caf0d2cf8ab6addba370cb0631.png) beneath the
block![](media/733ed0872f3b625ebcb27dba066b9d2f.png);

Then go to the **“Logic”**, drag out the “**=**”
block![](media/b868e3156f315a320d081e1f6781a054.png)into behind the if block;
drag the![](media/0e26f59a67b7ee7cb04d4f96dad7d757.png)from the **“Variables”**
into the first input box at the left side of “**=**”; drag
the![](media/b08f4a7cb980c8c2721cf523799e0d6a.png)from the **“Text”** into the
second input box at the right side of “**=**” and remember to change the value a
into S. You will get the block:

![](media/3ce51a16f3c600db6a75de9a76c1d1f9.png)

And go to **“Variables”**, drag
the![](media/616c6c6cfe44b38ea36019a89c7289fc.png)into the
block![](media/f7262145ff223a2e35fc86678ff6a20d.png); then drag out the
block![](media/5cde38c0e9ceceb5a70ec58a8cb4dcaf.png)from the block **“Math”** ,
and drop into the block![](media/616c6c6cfe44b38ea36019a89c7289fc.png).

![](media/fa5a078b95c0e642b36f9c4c306d7c8b.png)

Up until now, we almost finish the program code, as shown below:

![](media/912fe662f7ec563c13b1c2c34551134c.png)

Finally go to **“Functions”**, drag out the
block![](media/f9e3ae63748242c84ce6497031689219.png)beneath the **case‘U’**

![](media/42d586b7dad117c11094abe33a49f78a.png)

Okay now we have completed the whole program code for frog robot to achieve the
multiple functions.

**Note:** should upload the code success first, then plug in Bluetooth module.
Otherwise, code upload fails.

![](media/73004eec1e09e4ea90095a76a2aea312.png)

**Result**

1.  Upload the code to keyestudio nano ch340 success;

2.  Stack keyestudio nano ch340 onto Nano Shield;

3.  Connect Keyestudio nano ch340 to computer with a mini USB cable.

4.  Install well the Bluetooth APP;

5.  Powered on, press down the Power_Switch on Nano Shield. The indicator on
    Bluetooth module flashes. So you can open mobile Bluetooth APP to connect
    the Bluetooth module;

6.  Bluetooth connected, aim at the Bluetooth module, tap the key on the
    Bluetooth APP. We can make the robot do any motions.

![ks0446-9](media/d49d928259f9a7dae1aa09cb59c92227.jpeg)

## Project Resources

-   KEYESTUDIO WIKI: <http://wiki.keyestudio.com/>

-   Download the Bluetooth APP, Mixly Code and Frog_Robot library from the link:
    
    <https://1drv.ms/u/s!ArhgRvK6-RyJcfbRsZ0Tmotiu0g?e=eow9bk>

-   Video Link:
    [http://video.keyestudio.com/ks0446/](http://www.keyestudio.com/wp/ks0313/)

## Our Tutorial

This tutorial is designed for everyone to play the smart car. You will learn all
the basic information about how to control the smart car with controller board,
sensors and components. Simple to learn and Easy to play!

It’s just the beginning of programming journey. There are more and more awesome
projects for you to explore. Furthermore, our KEYESTUDIO research and
development team will continue to explore on this path, walking you through the
basics up to complex projects.

## About keyestudio

Located in Shenzhen, the Silicon Valley of China, KEYES DIY ROBOT CO.,LTD is a
thriving technology company dedicated to open-source hardware research and
development, production and marketing.

Keyestudio is a best-selling brand owned by KEYES Corporation, our product lines
range from Arduino boards, shields, sensor modules, Raspberry Pi, micro:bit
extension boards and smart car to complete starter kits designed for customers
of any level to learn Arduino knowledge.

All of our products comply with international quality standards and are greatly
appreciated in a variety of different markets throughout the world. For more
details of our products, you can check it from the links below.

**Official Website:** <http://www.keyestudio.com/>

**US Amazon storefront:** <http://www.amazon.com/shops/A26TCVWBQE4D9T>

**CA Amazon storefront:** <http://www.amazon.ca/shops/A26TCVWBQE4D9T>

**UK Amazon storefront:** <http://www.amazon.co.uk/shops/A39F7KX4U3W9JH>

**DE Amazon storefront:** <http://www.amazon.de/shops/A39F7KX4U3W9JH>

**FR Amazon storefront:** <http://www.amazon.de/shops/A39F7KX4U3W9JH>

**ES Amazon storefront:** <http://www.amazon.de/shops/A39F7KX4U3W9JH>

**IT Amazon storefront:** <http://www.amazon.de/shops/A39F7KX4U3W9JH>

**US Amazon storefront:** <http://www.amazon.com/shops/APU90DTITU5DG>

**CA Amazon storefront:** <http://www.amazon.ca/shops/APU90DTITU5DG>

**JP Amazon storefront:** <http://www.amazon.jp/shops/AE9VWCCXQIC6J>

## Customer Service

As a continuous and fast growing technology company, we keep striving our best
to offer you excellent products and quality service as to meet your expectation.
We look forward to hearing from you and any of your critical

comment or suggestion would be much valuable to us.

You can reach out to us by simply drop a line at
[Fennie@keyestudio.com](mailto:Fennie@keyestudio.com)

![logo (2)](media/a7a82b43d3f79beaab6ebe4d5a361357.png)Thank you in advance.
